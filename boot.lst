0001   0000             	MODULE 	boot
0002   0000             	DEVICE 	ZXSPECTRUM48
0003   0000             	OUTPUT	boot.cde
0004   0000             	
0005   0000             ;███████████████ V A R I A B L E S ██████████████████████████████████████		
0006   0000             DMA 		equ #0B
0007   0000             ULA			equ #FE
0008   0000             ;███████████████ M A I N  C O D E ███████████████████████████████████████	
0009   0000             			org 49152		
0010   C000             maincode
0011   C000             			DISP 0
0012   0000 F3          boot		di
0013   0001 31 00 00    			ld sp,0
0014   0004 ED 56       			im 1
0015   0006             ;			ld	a, #C3				; Z80DMA command: WR6: Reset
0016   0006             ;			out	(DMA), a
0017   0006 AF          			xor	a
0018   0007 ED 47       			ld	i, a
0019   0009 D3 FE       			out (ULA),a
0020   000B 21 FF 5A    			ld	hl, 5AFFh
0021   000E 11 FE 5A    			ld	de, 5AFEh
0022   0011 01 FF 1A    			ld	bc, 1AFFh
0023   0014 77          			ld	(hl), a
0024   0015 ED B8       			lddr					; Clear	videoram (black	screen)	
0025   0017 DB FE       			in	a, (254)
0026   0019 2F          			cpl
0027   001A E6 1F       			and	1Fh
0028   001C 20 59       			jr  nz,endramtest		;skip Busy effect
0029   001E 18 1A       			jr boot2
0030   0020             			db "LMN128"
0030   0020 4C4D4E313238
0031   0026             //WARNING max #38 bytes!!!!			
0032   0026 00          endboot		BLOCK #38-endboot,0
0033   0038             ;			DISP #38
0034   0038 FB          im1			ei
0035   0039 C9          			ret					
0036   003A             boot2
0037   003A             	INCLUDE "effect.a80"			; Busy nonbootdisk effect
0001+  003A             ;	DEVICE	ZXSPECTRUM48
0002+  003A             ;	OUTPUT	effect.cod
0003+  003A             ;	org	#8000
0004+  003A             
0005+  003A             ;start	xor	a
0006+  003A             ;	out	(#fe),a
0007+  003A 3E 03       	ld	a,#03
0008+  003C 21 00 40    	ld	hl,#4000
0009+  003F 11 01 40    	ld	de,#4001
0010+  0042 01 00 01    nn1	ld	bc,#0100
0011+  0045 75          	ld	(hl),l
0012+  0046 ED B0       	ldir
0013+  0048 06 06       	ld	b,#06
0014+  004A 36 7E       	ld	(hl),#7e
0015+  004C ED B0       	ldir
0016+  004E 04          	inc	b
0017+  004F 75          	ld	(hl),l
0018+  0050 ED B0       	ldir
0019+  0052 3D          	dec	a
0020+  0053 20 ED       	jr	nz,nn1
0021+  0055 11 00 00    	ld de,0			;LMN start	
0022+  0058 44          nn2	ld	b,h
0023+  0059 4D          	ld	c,l
0024+  005A 29          	add	hl,hl
0025+  005B 29          	add	hl,hl
0026+  005C 29          	add	hl,hl
0027+  005D 09          	add	hl,bc
0028+  005E 01 0C 00    	ld	bc,12
0029+  0061 09          	add	hl,bc
0030+  0062 7C          	ld	a,h
0031+  0063 E6 03       	and	#03
0032+  0065 F6 58       	or	#58
0033+  0067 67          	ld	h,a
0034+  0068 EB          	ex	de,hl
0035+  0069             
0036+  0069 7C          	ld a,h			;LMN
0037+  006A FE 20       	cp 32			;LMN lenght
0038+  006C 28 09       	jr z, end		;LMN
0039+  006E             	
0040+  006E ED A0       	ldi
0041+  0070 EB          	ex	de,hl
0042+  0071 06 1E       	ld	b,#1e		;LMN (was #20) speed
0043+  0073 10 FE       wait	djnz	wait
0044+  0075 18 E1       	jr	nn2
0045+  0077             end
0046+  0077             ;		ret   ; for testing
0047+  0077             ;	OUTEND
0048+  0077             ;	SAVESNA	"effect.sna",start
0049+  0077             
0038   0077             
0039   0077 21 85 00    endramtest	ld hl,ramcodeinrom
0040   007A 11 85 C0    			ld de,ramcode
0041   007D 01 1D 35    			ld bc,endramcode-ramcode
0042   0080 ED B0       			ldir
0043   0082 C3 85 C0    			jp ramcode
0044   0085             
0045   0085             ramcodeinrom	
0046   0085             
0047   0085             			ent						; restore address to compile to right place
0048   C085             ramcode		
0049   C085 F3          			di						; for sna test
0050   C086 31 00 00    			ld sp,0					; for sna test
0051   C089             ; temporary switch to MB02+ machine for testing and NMI enable			
0052   C089 AF          			xor a
0053   C08A 01 3B 20    			ld bc,#203B				//ZXi portselect
0054   C08D ED 79       			out (c),a
0055   C08F 01 3B 21    			ld bc,#213B
0056   C092 3E 01       			ld a,1					//HW - 1 - MB02+
0057   C094 ED 79       			out (c),a
0058   C096 CD 1B CB    			call cls.CLS
0059   C099 3E 07       			ld   a,7
0060   C09B 21 00 58    			ld   HL,22528
0061   C09E 11 01 58    			ld   DE,22529
0062   C0A1 01 FF 02    			ld   BC,767
0063   C0A4 77          			ld   (HL),a
0064   C0A5 ED B0       			ldir
0065   C0A7 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0066   C0AA C2 6C C2    				jp nz,skipanim
0067   C0AD 3E 00       			ld a,0
0068   C0AF 32 7D D5    			ld (txy32.orflag),a
0069   C0B2 3E 42       			ld a,66
0070   C0B4 32 CA D4    			ld (txy32.T32_ATT),a
0071   C0B7 01 00 00    			ld	bc,#0000
0072   C0BA CD BD C1    			call fall1
0073   C0BD CD 38 CB    				call iinkey.IINKEY		; waiting for key
0074   C0C0 C2 6C C2    				jp nz,skipanim
0075   C0C3 3E 46       			ld a,70
0076   C0C5 32 CA D4    			ld (txy32.T32_ATT),a
0077   C0C8 01 10 00    			ld	bc,#0010
0078   C0CB CD BD C1    			call fall1
0079   C0CE CD 38 CB    				call iinkey.IINKEY		; waiting for key
0080   C0D1 C2 6C C2    				jp nz,skipanim			
0081   C0D4 3E 44       			ld a,68
0082   C0D6 32 CA D4    			ld (txy32.T32_ATT),a
0083   C0D9 01 2E 00    			ld	bc,#002E
0084   C0DC CD BD C1    			call fall1
0085   C0DF CD 38 CB    				call iinkey.IINKEY		; waiting for key
0086   C0E2 C2 6C C2    				jp nz,skipanim			
0087   C0E5 3E 45       			ld a,69
0088   C0E7 32 CA D4    			ld (txy32.T32_ATT),a
0089   C0EA 01 59 00    			ld	bc,#0059
0090   C0ED CD BD C1    			call fall1
0091   C0F0 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0092   C0F3 C2 6C C2    				jp nz,skipanim
0093   C0F6             				
0094   C0F6 3E 01       			ld a,1
0095   C0F8 32 7D D5    			ld (txy32.orflag),a
0096   C0FB 3E 42       			ld a,66
0097   C0FD 32 CA D4    			ld (txy32.T32_ATT),a
0098   C100 01 00 00    			ld	bc,#0000
0099   C103 CD CE C1    			call fall2
0100   C106 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0101   C109 C2 6C C2    				jp nz,skipanim			
0102   C10C 3E 46       			ld a,70
0103   C10E 32 CA D4    			ld (txy32.T32_ATT),a
0104   C111 01 10 00    			ld	bc,#0010
0105   C114 CD CE C1    			call fall2			
0106   C117 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0107   C11A C2 6C C2    				jp nz,skipanim			
0108   C11D 3E 44       			ld a,68
0109   C11F 32 CA D4    			ld (txy32.T32_ATT),a
0110   C122 01 28 00    			ld	bc,#0028
0111   C125 CD DF C1    			call fall3
0112   C128 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0113   C12B C2 6C C2    				jp nz,skipanim			
0114   C12E 3E 45       			ld a,69
0115   C130 32 CA D4    			ld (txy32.T32_ATT),a
0116   C133 01 58 00    			ld	bc,#0058
0117   C136 CD F0 C1    			call fall4
0118   C139 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0119   C13C C2 6C C2    				jp nz,skipanim			
0120   C13F             			
0121   C13F 3E 00       			ld a,0
0122   C141 32 7D D5    			ld (txy32.orflag),a
0123   C144 3E 45       			ld a,69
0124   C146 32 CA D4    			ld (txy32.T32_ATT),a
0125   C149 01 57 2A    			ld	bc,#2A57
0126   C14C 11 60 2A    			ld  de,#2A60
0127   C14F 3E 4B       			ld a,#4B
0128   C151 CD 78 C1    			call wide1
0129   C154 CD 38 CB    				call iinkey.IINKEY		; waiting for key
0130   C157 C2 6C C2    				jp nz,skipanim			
0131   C15A 06 01       			ld b,1
0132   C15C CD FF CB    			call wait.wait
0133   C15F 3E 44       			ld a,68
0134   C161 32 CA D4    			ld (txy32.T32_ATT),a
0135   C164 01 2A 2A    			ld	bc,#2A2A
0136   C167 11 35 2A    			ld  de,#2A35
0137   C16A 3E 1F       			ld a,#1F
0138   C16C CD 78 C1    			call wide1
0139   C16F CD 38 CB    				call iinkey.IINKEY		; waiting for key
0140   C172 C2 6C C2    				jp nz,skipanim			
0141   C175             
0142   C175             ;			call iinkey.ANYKEY	
0143   C175 C3 4E C2    			jp follow1
0144   C178             			
0145   C178 F5          wide1		push af
0146   C179 D5          			push de
0147   C17A C5          			push bc
0148   C17B ED 43 77 D5 			ld	(txy32.cursor),bc
0149   C17F 3E 84       			ld a,132
0150   C181 CD CB D4    			call txy32.xy
0151   C184 C1          			pop bc
0152   C185 C5          			push bc
0153   C186 3E 08       			ld a,8
0154   C188 80          			add a,b
0155   C189 47          			ld b,a
0156   C18A 3E 86       			ld a,134
0157   C18C ED 43 77 D5 			ld	(txy32.cursor),bc
0158   C190 CD CB D4    			call txy32.xy
0159   C193 C1          			pop bc
0160   C194 D1          			pop de
0161   C195 C5          			push bc
0162   C196 D5          			push de
0163   C197 ED 53 77 D5 			ld	(txy32.cursor),de
0164   C19B 3E 81       			ld a,129
0165   C19D CD CB D4    			call txy32.xy
0166   C1A0 D1          			pop de
0167   C1A1 D5          			push de
0168   C1A2 3E 08       			ld a,8
0169   C1A4 82          			add a,d
0170   C1A5 57          			ld d,a
0171   C1A6 ED 53 77 D5 			ld	(txy32.cursor),de
0172   C1AA 3E 83       			ld a,131
0173   C1AC CD CB D4    			call txy32.xy
0174   C1AF 06 04       			ld b,4
0175   C1B1 CD FF CB    			call wait.wait
0176   C1B4 D1          			pop de
0177   C1B5 C1          			pop bc
0178   C1B6 F1          			pop af
0179   C1B7 1C          			inc e
0180   C1B8 0D          			dec c
0181   C1B9 B9          			cp c
0182   C1BA 20 BC       			jr nz,wide1
0183   C1BC C9          			ret
0184   C1BD             			
0185   C1BD C5          fall1		push bc
0186   C1BE CD 2B C2    			call singledot
0187   C1C1 06 01       			ld b,1
0188   C1C3 CD FF CB    			call wait.wait
0189   C1C6 C1          			pop bc
0190   C1C7 04          			inc b
0191   C1C8 3E 2B       			ld a,#2B
0192   C1CA B8          			cp b
0193   C1CB 20 F0       			jr nz,fall1
0194   C1CD C9          			ret
0195   C1CE C5          fall2		push bc
0196   C1CF CD 01 C2    			call halfdot
0197   C1D2 06 01       			ld b,1
0198   C1D4 CD FF CB    			call wait.wait
0199   C1D7 C1          			pop bc
0200   C1D8 04          			inc b
0201   C1D9 3E 2B       			ld a,#2B
0202   C1DB B8          			cp b
0203   C1DC 20 F0       			jr nz,fall2
0204   C1DE C9          			ret			
0205   C1DF             	
0206   C1DF C5          fall3		push bc
0207   C1E0 CD 0F C2    			call halfdot3
0208   C1E3 06 01       			ld b,1
0209   C1E5 CD FF CB    			call wait.wait
0210   C1E8 C1          			pop bc
0211   C1E9 04          			inc b
0212   C1EA 3E 2B       			ld a,#2B
0213   C1EC B8          			cp b
0214   C1ED 20 F0       			jr nz,fall3
0215   C1EF C9          			ret	
0216   C1F0             
0217   C1F0 C5          fall4		push bc
0218   C1F1 CD 1D C2    			call halfdot4
0219   C1F4 06 01       			ld b,1
0220   C1F6 CD FF CB    			call wait.wait
0221   C1F9 C1          			pop bc
0222   C1FA 04          			inc b
0223   C1FB 3E 2B       			ld a,#2B
0224   C1FD B8          			cp b
0225   C1FE 20 F0       			jr nz,fall4
0226   C200 C9          			ret				
0227   C201             	
0228   C201 ED 43 77 D5 halfdot     ld	(txy32.cursor),bc
0229   C205 3E 84       			ld a,132
0230   C207 CD CB D4    			call txy32.xy
0231   C20A 3E 85       			ld a,133
0232   C20C C3 CB D4    			jp txy32.xy
0233   C20F             
0234   C20F ED 43 77 D5 halfdot3    ld	(txy32.cursor),bc
0235   C213 3E 88       			ld a,136
0236   C215 CD CB D4    			call txy32.xy
0237   C218 3E 89       			ld a,137
0238   C21A C3 CB D4    			jp txy32.xy	
0239   C21D             
0240   C21D ED 43 77 D5 halfdot4    ld	(txy32.cursor),bc
0241   C221 3E 8A       			ld a,138
0242   C223 CD CB D4    			call txy32.xy
0243   C226 3E 8B       			ld a,139
0244   C228 C3 CB D4    			jp txy32.xy	
0245   C22B             			
0246   C22B ED 43 77 D5 singledot	ld	(txy32.cursor),bc
0247   C22F 3E 84       			ld a,132
0248   C231 C5          			push bc
0249   C232 CD CB D4    			call txy32.xy
0250   C235 3E 85       			ld a,133
0251   C237 CD CB D4    			call txy32.xy
0252   C23A C1          			pop	bc
0253   C23B 3E 08       			ld a,8
0254   C23D 80          			add a,b
0255   C23E 47          			ld b,a
0256   C23F ED 43 77 D5 			ld	(txy32.cursor),bc	
0257   C243 3E 86       			ld a,134
0258   C245 CD CB D4    			call txy32.xy
0259   C248 3E 87       			ld a,135
0260   C24A CD CB D4    			call txy32.xy
0261   C24D C9          			ret
0262   C24E             
0263   C24E 11 0F 05    follow1		ld de,#050F
0264   C251 21 8A E1    	        ld hl,ultimatelogo
0265   C254 3E 0D       			ld a,13				// number of sprites in animations
0266   C256 F5          1			push af
0267   C257 D5          			push de
0268   C258 E5          			push hl
0269   C259 CD 8E D5    			call sprite2.OK
0270   C25C 06 0C       			ld b,12
0271   C25E CD FF CB    			call wait.wait
0272   C261 E1          			pop hl
0273   C262 11 14 00    			ld de,20			// lenght of sprite2
0274   C265 19          			add hl,de
0275   C266 D1          			pop de
0276   C267 1C          			inc e
0277   C268 F1          			pop af
0278   C269 3D          			dec a
0279   C26A 20 EA       			jr nz,1B
0280   C26C             /*//Ultimate		
0281   C26C~            			ld de,#0500
0282   C26C~            	        ld hl,dots+38*0
0283   C26C~            			ld a,6				// number of sprites in animations
0284   C26C~            2			push af
0285   C26C~            			push de
0286   C26C~            			push hl
0287   C26C~            //			call sprite2.OK
0288   C26C~            			ld b,9
0289   C26C~            			call wait.wait
0290   C26C~            			pop hl
0291   C26C~            			pop de
0292   C26C~            			inc e
0293   C26C~            			inc e
0294   C26C~            			pop af
0295   C26C~            			dec a
0296   C26C             			jr nz,2B */
0297   C26C             skipanim			
0298   C26C 11 00 00    			ld de,#0000
0299   C26F 21 A8 D9    	    	ld hl,MB03pluslogo
0300   C272 CD 8E D5    			call sprite2.OK
0301   C275             
0302   C275 21 AB F1    			ld hl, STRIPS
0303   C278 01 00 48    			ld bc,#4800
0304   C27B ED 43 77 D5 			ld	(txy32.cursor),bc
0305   C27F E5          			push hl
0306   C280 CD B1 D4    			call txy32.txy
0307   C283 E1          			pop hl
0308   C284 01 00 A0    			ld bc,#A000
0309   C287 ED 43 77 D5 			ld	(txy32.cursor),bc
0310   C28B CD B1 D4    			call txy32.txy
0311   C28E             ;carymary         
0312   C28E 01 00 48    			 ld bc,#4800
0313   C291 11 FF 48    			 ld de,#48ff
0314   C294 CD 49 CA    			 call draw_jugo.DRAW
0315   C297             
0316   C297 01 7A 3D    			ld	bc,#3D7A
0317   C29A ED 43 AB CC 			ld	(txy51.cursor),bc
0318   C29E 21 E3 F0    			ld	hl,TEXT0
0319   C2A1 CD 07 CC    			call txy51.txy
0320   C2A4 01 00 A8    			ld	bc,#A800
0321   C2A7 ED 43 AB CC 			ld	(txy51.cursor),bc
0322   C2AB 21 FE F0    			ld	hl,TEXT4
0323   C2AE CD 07 CC    			call txy51.txy			
0324   C2B1 01 00 B8    			ld	bc,#B800
0325   C2B4 ED 43 AB CC 			ld	(txy51.cursor),bc
0326   C2B8 21 47 F1    			ld	hl,TEXT3
0327   C2BB CD 07 CC    			call txy51.txy
0328   C2BE 01 00 B0    			ld	bc,#B000
0329   C2C1 ED 43 AB CC 			ld	(txy51.cursor),bc
0330   C2C5 21 2A F1    			ld	hl,TEXT2
0331   C2C8 CD 07 CC    			call txy51.txy
0332   C2CB 01 B0 9E    			ld	bc,#9EB0
0333   C2CE ED 43 AB CC 			ld	(txy51.cursor),bc
0334   C2D2 21 D5 F3    			ld	hl,FW1
0335   C2D5 CD 07 CC    			call txy51.txy
0336   C2D8 01 D8 9E    			ld	bc,#9ED8
0337   C2DB ED 43 AB CC 			ld	(txy51.cursor),bc
0338   C2DF 21 97 F5    			ld	hl,DATE
0339   C2E2 CD 07 CC    			call txy51.txy		
0340   C2E5             
0341   C2E5 01 00 50    			ld	bc,#5000
0342   C2E8 ED 43 AB CC 			ld	(txy51.cursor),bc
0343   C2EC 21 D5 F1    			ld	hl,HW1
0344   C2EF CD 07 CC    			call txy51.txy
0345   C2F2 01 03 58    			ld	bc,#5803
0346   C2F5 ED 43 AB CC 			ld	(txy51.cursor),bc
0347   C2F9 21 E6 F1    			ld	hl,HW2
0348   C2FC CD 07 CC    			call txy51.txy
0349   C2FF 01 03 60    			ld	bc,#6003
0350   C302 ED 43 AB CC 			ld	(txy51.cursor),bc
0351   C306 21 0F F2    			ld	hl,HW3
0352   C309 CD 07 CC    			call txy51.txy
0353   C30C 01 03 68    			ld	bc,#6803
0354   C30F ED 43 AB CC 			ld	(txy51.cursor),bc
0355   C313 21 24 F2    			ld	hl,HW4
0356   C316 CD 07 CC    			call txy51.txy
0357   C319 01 03 70    			ld	bc,#7003
0358   C31C ED 43 AB CC 			ld	(txy51.cursor),bc
0359   C320 21 62 F2    			ld	hl,HW5
0360   C323 CD 07 CC    			call txy51.txy
0361   C326 01 03 78    			ld	bc,#7803
0362   C329 ED 43 AB CC 			ld	(txy51.cursor),bc
0363   C32D 21 7E F2    			ld	hl,HW6
0364   C330 CD 07 CC    			call txy51.txy
0365   C333             
0366   C333 01 00 80    			ld	bc,#8000
0367   C336 ED 43 AB CC 			ld	(txy51.cursor),bc
0368   C33A 21 AC F2    			ld	hl,CONF1
0369   C33D CD 07 CC    			call txy51.txy
0370   C340 01 03 88    			ld	bc,#8803
0371   C343 ED 43 AB CC 			ld	(txy51.cursor),bc
0372   C347 21 C2 F2    			ld	hl,CONF2
0373   C34A CD 07 CC    			call txy51.txy
0374   C34D 01 03 90    			ld	bc,#9003
0375   C350 ED 43 AB CC 			ld	(txy51.cursor),bc
0376   C354 21 04 F3    			ld	hl,CONF3
0377   C357 CD 07 CC    			call txy51.txy
0378   C35A             		
0379   C35A             	
0380   C35A             //carymary2				
0381   C35A 01 00 A6    			 ld bc,#A600
0382   C35D 11 FF A6    			 ld de,#A6ff
0383   C360 CD 49 CA    			 call draw_jugo.DRAW
0384   C363             			
0385   C363 CD 92 D6    			call cf.IDENT
0386   C366 01 7B 70    			ld	bc,#707B
0387   C369 ED 43 AB CC 			ld	(txy51.cursor),bc
0388   C36D 20 0C       			jr nz,cferr
0389   C36F             ;model
0390   C36F 21 DE D7    			ld   hl,cf.BUFFER+54
0391   C372 06 28       			ld   b,40
0392   C374 CD 97 D7    			call cf.PROHOD
0393   C377 DD CB 4F FE 			set  7,(ix+79)			
0394   C37B CD 07 CC    cferr		call txy51.txy
0395   C37E             
0396   C37E             
0397   C37E             loopkey		
0398   C37E             1			
0399   C37E AF          			xor a
0400   C37F 01 3B 20    			ld bc,#203B				//ZXi portselect
0401   C382 ED 79       			out (c),a
0402   C384 01 3B 21    			ld bc,#213B
0403   C387 3D          			dec a					//HW - FF firmware
0404   C388 ED 79       			out (c),a
0405   C38A FB          			ei
0406   C38B             /*			xor a
0407   C38B~            			ld bc,#203B
0408   C38B~            			out (c),a
0409   C38B~            			ld bc,#273B
0410   C38B~            			in a,(c)
0411   C38B~            			cp h
0412   C38B~            			ld h,a
0413   C38B             			push hl	*/
0414   C38B 76          			halt
0415   C38C             //			xor a
0416   C38C             //			out (254),a
0417   C38C F3          			di
0418   C38D AF          			xor a
0419   C38E 01 3B 20    			ld bc,#203B				//ZXi portselect
0420   C391 ED 79       			out (c),a
0421   C393 01 3B 21    			ld bc,#213B
0422   C396 3E 01       			ld a,1					//HW - 1 MB02+
0423   C398 ED 79       			out (c),a	
0424   C39A CD A4 C8    			call clock		
0425   C39D CD 38 CB    			call iinkey.IINKEY		; waiting for key
0426   C3A0             ;			pop hl		
0427   C3A0 28 DC       			jr z,1B
0428   C3A2             
0429   C3A2 FE 33       			cp "3"
0430   C3A4 C2 30 C4    			jp nz,next1
0431   C3A7 CD 15 CA    			call clean
0432   C3AA 01 00 B8    			ld bc,#B800
0433   C3AD ED 43 77 D5 			ld	(txy32.cursor),bc
0434   C3B1 21 AB F1    			LD HL, STRIPS
0435   C3B4 CD B1 D4    			call txy32.txy
0436   C3B7 01 00 BF    			ld bc,#BF00
0437   C3BA 11 FF BF    			ld de,#BFFF
0438   C3BD CD 49 CA    			call draw_jugo.DRAW				
0439   C3C0             /*			ld de,#0E00
0440   C3C0~            	        ld hl,EsxLogo
0441   C3C0             			call sprite2.OK*/
0442   C3C0 01 08 58    			ld	bc,#5808
0443   C3C3 ED 43 AB CC 			ld	(txy51.cursor),bc
0444   C3C7 21 22 F4    			ld	hl,ULT1
0445   C3CA CD 07 CC    			call txy51.txy
0446   C3CD 01 08 60    			ld	bc,#6008
0447   C3D0 ED 43 AB CC 			ld	(txy51.cursor),bc
0448   C3D4 21 57 F4    			ld	hl,ULT2
0449   C3D7 CD 07 CC    			call txy51.txy
0450   C3DA 01 08 68    			ld	bc,#6808
0451   C3DD ED 43 AB CC 			ld	(txy51.cursor),bc
0452   C3E1 21 89 F4    			ld	hl,ULT3
0453   C3E4 CD 07 CC    			call txy51.txy
0454   C3E7 01 08 78    			ld	bc,#7808
0455   C3EA ED 43 AB CC 			ld	(txy51.cursor),bc
0456   C3EE 21 B1 F4    			ld	hl,ULT4
0457   C3F1 CD 07 CC    			call txy51.txy
0458   C3F4 01 08 80    			ld	bc,#8008
0459   C3F7 ED 43 AB CC 			ld	(txy51.cursor),bc
0460   C3FB 21 E4 F4    			ld	hl,ULT5
0461   C3FE CD 07 CC    			call txy51.txy
0462   C401 01 08 88    			ld	bc,#8808
0463   C404 ED 43 AB CC 			ld	(txy51.cursor),bc
0464   C408 21 19 F5    			ld	hl,ULT6
0465   C40B CD 07 CC    			call txy51.txy
0466   C40E 01 08 A0    			ld	bc,#A008
0467   C411 ED 43 AB CC 			ld	(txy51.cursor),bc
0468   C415 21 4C F5    			ld	hl,ULT7
0469   C418 CD 07 CC    			call txy51.txy
0470   C41B 01 08 A8    			ld	bc,#A808
0471   C41E ED 43 AB CC 			ld	(txy51.cursor),bc
0472   C422 21 7C F5    			ld	hl,ULT8
0473   C425 CD 07 CC    			call txy51.txy											
0474   C428 CD 38 CB    holdkey5	call iinkey.IINKEY
0475   C42B 28 FB       			jr z,holdkey5			
0476   C42D C3 85 C0    			jp ramcode
0477   C430             
0478   C430 FE 11       next1		cp 11h					; break
0479   C432 20 20       			jr nz,2F				; no break	
0480   C434 AF          			xor a
0481   C435 01 3B 20    			ld bc,#203B				//ZXi portselect
0482   C438 ED 79       			out (c),a
0483   C43A 01 3B 21    			ld bc,#213B
0484   C43D             									//HW - 0
0485   C43D ED 79       			out (c),a									
0486   C43F 01 FD 1F    			ld bc,8189				;ZX128+2A rom
0487   C442 ED 79       			out (c),a			
0488   C444 01 FD 7F    			ld bc,32765				;ZX128 rom0 
0489   C447 ED 79       			out (c),a
0490   C449 ED 47       			ld i,a
0491   C44B ED 46       			im 0
0492   C44D 3D          			dec a					// A should have #FF	
0493   C44E 31 FF FF    			ld sp,#ffff				//Real reset simulation. Sp is set to #ffff,
0494   C451 C3 00 00    			jp 0					; jp to 0, rst 0 is not good becaus it is call
0495   C454             2			
0496   C454 FE 31       			cp '1'					//key 1
0497   C456 C2 DC C4    			jp nz,3F
0498   C459 CD 15 CA    			call clean
0499   C45C 01 00 B8    			ld bc,#B800
0500   C45F ED 43 77 D5 			ld	(txy32.cursor),bc
0501   C463 21 AB F1    			LD HL, STRIPS
0502   C466 CD B1 D4    			call txy32.txy
0503   C469 01 00 BF    			ld bc,#BF00
0504   C46C 11 FF BF    			ld de,#BFFF
0505   C46F CD 49 CA    			call draw_jugo.DRAW				
0506   C472 11 03 0D    			ld de,#0D03
0507   C475 21 65 EB    	        ld hl,BSDOSLogo
0508   C478 CD 8E D5    			call sprite2.OK
0509   C47B 01 56 98    			ld	bc,#9856
0510   C47E ED 43 AB CC 			ld	(txy51.cursor),bc
0511   C482 21 F2 F3    			ld	hl,BSD1
0512   C485 CD 07 CC    			call txy51.txy					
0513   C488             
0514   C488 CD 38 CB    holdkey3	call iinkey.IINKEY
0515   C48B 20 FB       			jr nz,holdkey3	
0516   C48D             
0517   C48D 06 06       			ld b,6					//number of pages to transfer					
0518   C48F C5          22			push bc
0519   C490 AF          			xor a
0520   C491 01 3B 20    			ld bc,#203B					//ZXi portselect
0521   C494 ED 79       			out (c),a
0522   C496 01 3B 21    			ld bc,#213B
0523   C499 3E FF       			ld a,255					//HW - FF - Firmware
0524   C49B ED 79       			out (c),a
0525   C49D AF          			xor a
0526   C49E D3 27       			out (#27),a
0527   C4A0 D3 67       			out (#67),a
0528   C4A2 C1          			pop bc
0529   C4A3 C5          			push bc
0530   C4A4 3E 08       			ld a,8						;first Flash block
0531   C4A6 05          			dec b
0532   C4A7 80          			add a,b	
0533   C4A8 80          			add a,b						;multiplication by 2									
0534   C4A9 D3 07       			out (#07),a
0535   C4AB 3C          			inc a
0536   C4AC D3 47       			out (#47),a
0537   C4AE             
0538   C4AE 21 00 00    			ld hl,0
0539   C4B1 11 00 80    			ld de,32768
0540   C4B4 01 00 40    			ld bc,16384
0541   C4B7 ED B0       			ldir
0542   C4B9             
0543   C4B9 01 3B 21    			ld bc,#213B
0544   C4BC 3E 01       			ld a,1						//HW - 1 - MB02+
0545   C4BE ED 79       			out (c),a
0546   C4C0 C1          			pop bc
0547   C4C1 C5          			push bc
0548   C4C2 3E 60       			ld a,96						;first MB02+ RAM
0549   C4C4 05          			dec b
0550   C4C5 80          			add a,b
0551   C4C6 D3 17       			out (23), a
0552   C4C8 21 00 80    			ld hl,32768
0553   C4CB 11 00 00    			ld de,0
0554   C4CE 01 00 40    			ld bc,16384
0555   C4D1 ED B0       			ldir
0556   C4D3 C1          			pop bc
0557   C4D4 10 B9       			djnz 22B
0558   C4D6             
0559   C4D6 3E 40       			ld a,64
0560   C4D8 D3 17       			out (23),a
0561   C4DA 18 2F       			jr 4F
0562   C4DC             3			
0563   C4DC FE 21       			cp '!'					; key !
0564   C4DE 20 5B       			jr nz, 5F
0565   C4E0             			
0566   C4E0 CD 15 CA    			call clean
0567   C4E3 01 00 B8    			ld bc,#B800
0568   C4E6 ED 43 77 D5 			ld	(txy32.cursor),bc
0569   C4EA 21 AB F1    			LD HL, STRIPS
0570   C4ED CD B1 D4    			call txy32.txy
0571   C4F0 01 00 BF    			ld bc,#BF00
0572   C4F3 11 FF BF    			ld de,#BFFF
0573   C4F6 CD 49 CA    			call draw_jugo.DRAW				
0574   C4F9             /*			ld de,#0E00
0575   C4F9~            	        ld hl,EsxLogo
0576   C4F9             			call sprite2.OK*/
0577   C4F9 01 52 90    			ld	bc,#9052
0578   C4FC ED 43 AB CC 			ld	(txy51.cursor),bc
0579   C500 21 0D F4    			ld	hl,BSD2
0580   C503 CD 07 CC    			call txy51.txy
0581   C506 CD 38 CB    holdkey4	call iinkey.IINKEY
0582   C509 20 FB       			jr nz,holdkey4
0583   C50B             
0584   C50B AF          4			xor a
0585   C50C 01 3B 20    			ld bc,#203B					//ZXi portselect
0586   C50F ED 79       			out (c),a
0587   C511 01 3B 21    			ld bc,#213B
0588   C514 3E FF       			ld a,255					//HW - FF - Firmware
0589   C516 ED 79       			out (c),a
0590   C518 AF          			xor a
0591   C519 D3 27       			out (#27),a
0592   C51B D3 67       			out (#67),a
0593   C51D 3E 06       			ld a,6						//
0594   C51F D3 07       			out (#07),a
0595   C521 3C          			inc a
0596   C522 D3 47       			out (#47),a
0597   C524 21 00 00    			ld hl,0			; run EasyHDD
0598   C527 11 00 80    			ld de,32768
0599   C52A 01 00 40    			ld bc,16384
0600   C52D ED B0       			ldir
0601   C52F 01 3B 21    			ld bc,#213B
0602   C532 3E 01       			ld a,1					//HW - 1 - MB02+
0603   C534 ED 79       			out (c),a					
0604   C536 CD 00 80    			call 32768
0605   C539 18 04       			jr 6F
0606   C53B             
0607   C53B FE 65       5			cp 'e'					// key e
0608   C53D 20 14       			jr nz, 7F				// no key
0609   C53F             
0610   C53F             6
0611   C53F AF          			xor a
0612   C540 01 3B 20    			ld bc,#203B				//ZXi portselect
0613   C543 ED 79       			out (c),a
0614   C545 01 3B 21    			ld bc,#213B
0615   C548 3E 01       			ld a,1					//HW - 1 - MB02+
0616   C54A ED 79       			out (c),a			
0617   C54C 3E 40       			ld a,64					// 128K reset in BSROM140
0618   C54E D3 17       			out (23),a
0619   C550 C3 06 39    			jp #3906				//jp to bsrom140
0620   C553             			
0621   C553 FE 64       7			cp 'd'
0622   C555 20 4B       			jr nz, 8F				
0623   C557             ; clear below 3/3			
0624   C557 3E 07       			ld   a,7
0625   C559 21 00 5A    			ld   HL,22528+512
0626   C55C 11 01 5A    			ld   DE,22529+512
0627   C55F 01 FF 00    			ld   BC,255
0628   C562 77          			ld   (HL),a
0629   C563 ED B0       			ldir
0630   C565 21 00 50    			ld   HL,20480
0631   C568 11 01 50    			ld   DE,20481
0632   C56B 01 FF 07    			ld   BC,2047
0633   C56E 75          			ld   (HL),l
0634   C56F ED B0       			ldir
0635   C571             
0636   C571 AF          			xor a
0637   C572 01 3B 20    			ld bc,#203B					//ZXi portselect
0638   C575 ED 79       			out (c),a
0639   C577 01 3B 21    			ld bc,#213B
0640   C57A 3E FF       			ld a,255					//HW - FF - Firmware
0641   C57C ED 79       			out (c),a
0642   C57E AF          			xor a
0643   C57F D3 27       			out (#27),a
0644   C581 D3 67       			out (#67),a
0645   C583 3E 14       			ld a,20														
0646   C585 D3 07       			out (#07),a
0647   C587 3C          			inc a
0648   C588 D3 47       			out (#47),a
0649   C58A 3E 60       			ld a,#60					//flash enable, read only
0650   C58C D3 53       			out (#53),a
0651   C58E 21 00 00    			ld hl,0
0652   C591 11 78 69    			ld de,27000
0653   C594 01 70 17    			ld bc,6000
0654   C597 ED B0       			ldir
0655   C599 AF          			xor a						//firmware flash page														
0656   C59A D3 07       			out (#07),a
0657   C59C 3C          			inc a
0658   C59D D3 47       			out (#47),a
0659   C59F             
0660   C59F C3 78 69    			jp 27000
0661   C5A2             			
0662   C5A2 FE 74       8			cp 't'					// key t - zx diagnostics
0663   C5A4 20 1E       			jr nz, 9F				// no key
0664   C5A6 AF          			xor a
0665   C5A7 01 3B 20    			ld bc,#203B				//ZXi portselect
0666   C5AA ED 79       			out (c),a
0667   C5AC 01 3B 21    			ld bc,#213B
0668   C5AF 3E FF       			ld a,255				//HW - FF - Firmware
0669   C5B1 ED 79       			out (c),a
0670   C5B3 AF          			xor a
0671   C5B4 D3 27       			out (#27),a
0672   C5B6 D3 67       			out (#67),a
0673   C5B8 3E 02       			ld a,2
0674   C5BA D3 07       			out (#07),a
0675   C5BC 3C          			inc a
0676   C5BD D3 47       			out (#47),a
0677   C5BF 3E 60       			ld a,%01100000	;enable flash write disable
0678   C5C1 D3 53       			out (#53),a
0679   C5C3 C7          			rst 0
0680   C5C4 FE 32       9			cp '2'					// key 2 - Papaya DOS- ESXDOS DivMMC
0681   C5C6 20 67       			jr nz, 10F
0682   C5C8             
0683   C5C8 CD 15 CA    			call clean
0684   C5CB 01 00 B8    			ld bc,#B800
0685   C5CE ED 43 77 D5 			ld	(txy32.cursor),bc
0686   C5D2 21 AB F1    			LD HL, STRIPS
0687   C5D5 CD B1 D4    			call txy32.txy
0688   C5D8 01 00 BF    			ld bc,#BF00
0689   C5DB 11 FF BF    			ld de,#BFFF
0690   C5DE CD 49 CA    			call draw_jugo.DRAW				
0691   C5E1 11 00 0E    			ld de,#0E00
0692   C5E4 21 C3 E5    	        ld hl,EsxLogo
0693   C5E7 CD 8E D5    			call sprite2.OK
0694   C5EA 01 58 94    			ld	bc,#9458
0695   C5ED ED 43 AB CC 			ld	(txy51.cursor),bc
0696   C5F1 21 DF F3    			ld	hl,ESX1
0697   C5F4 CD 07 CC    			call txy51.txy					
0698   C5F7             
0699   C5F7 CD 38 CB    holdkey1	call iinkey.IINKEY
0700   C5FA 20 FB       			jr nz,holdkey1	
0701   C5FC             
0702   C5FC AF          			xor a
0703   C5FD             //			out (23),a 
0704   C5FD 01 3B 20    			ld bc,#203B				//ZXi portselect
0705   C600 ED 79       			out (c),a
0706   C602 01 3B 21    			ld bc,#213B
0707   C605 3E 02       			ld a,2					//HW - 2 - DIVMMC
0708   C607 ED 79       			out (c),a
0709   C609 01 3B 20    			ld bc,#203B				//ZXi portselect 
0710   C60C 3E 02       			ld a,2
0711   C60E ED 79       			out (c),a
0712   C610 01 3B 21    			ld bc,#213B
0713   C613 AF          			xor a					//IDE - 0 dissable
0714   C614 ED 79       			out (c),a
0715   C616 3E 80       			ld a,128
0716   C618 D3 E3       div_erase	out (#E3),a
0717   C61A 21 00 20    			ld hl,8192
0718   C61D 11 01 20    			ld de,8193
0719   C620 01 FF 1F    			ld bc,8191
0720   C623 75          			ld (hl),l
0721   C624 ED B0       			ldir
0722   C626 3C          			inc a
0723   C627 FE 85       			cp 128+5
0724   C629 20 ED       			jr nz,div_erase		//delete first 32KB od DivMMC RAM
0725   C62B AF          			xor a				//is enought to erase bank0 or
0726   C62C D3 E3       			out (#E3),a			//to force cold start zero $2dXX in page 0
0727   C62E C7          			rst 0
0728   C62F FE 52       10		cp "R"					//restart firmware
0729   C631 20 1C       			jr nz, 11F
0730   C633 AF          			xor a
0731   C634 01 3B 20    			ld bc,#203B				//ZXi portselect
0732   C637 ED 79       			out (c),a
0733   C639 01 3B 21    			ld bc,#213B
0734   C63C 3E FF       			ld a,255				//HW - FF - Firmware
0735   C63E ED 79       			out (c),a
0736   C640 AF          			xor a
0737   C641 D3 27       			out (#27),a
0738   C643 D3 67       			out (#67),a
0739   C645             ;			ld a,2
0740   C645 D3 07       			out (#07),a
0741   C647 3C          			inc a
0742   C648 D3 47       			out (#47),a
0743   C64A 3E 60       			ld a,%01100000	;enable flash write disable
0744   C64C D3 53       			out (#53),a
0745   C64E C7          			rst 0
0746   C64F FE 72       11		cp "r"					//restart to ramcode
0747   C651 20 03       			jr nz,12F
0748   C653 C3 85 C0    			jp ramcode
0749   C656 FE 54       12		cp "T"					//advance system info
0750   C658 C2 F8 C7    			jp nz,14F
0751   C65B CD 15 CA    13			call clean
0752   C65E             //carymary2
0753   C65E 01 00 B8    			ld bc,#B800
0754   C661 ED 43 77 D5 			ld	(txy32.cursor),bc
0755   C665 21 AB F1    			LD HL, STRIPS
0756   C668 CD B1 D4    			call txy32.txy
0757   C66B 01 00 BF    			ld bc,#BF00
0758   C66E 11 FF BF    			ld de,#BFFF
0759   C671 CD 49 CA    			call draw_jugo.DRAW			
0760   C674 11 13 10    			ld de,#1013
0761   C677 21 8E E2    	        ld hl,CaroLogo
0762   C67A CD 8E D5    			call sprite2.OK
0763   C67D             
0764   C67D AF          			xor a
0765   C67E 01 3B 20    			ld bc,#203B				//ZXi portselect
0766   C681 ED 79       			out (c),a
0767   C683 3E FF       			ld a,#FF
0768   C685 01 3B 21    			ld bc,#213B			
0769   C688 ED 79       			out (c),a
0770   C68A 3E E0       			ld a,#E0				//FRAM active
0771   C68C D3 53       			out (#53),a
0772   C68E             
0773   C68E 01 00 80    			ld	bc,#8000
0774   C691 ED 43 AB CC 			ld	(txy51.cursor),bc
0775   C695 21 42 F3    			ld	hl,ADVS0
0776   C698 CD 07 CC    			call txy51.txy			
0777   C69B 21 FF 3F    			ld hl,#3FFF
0778   C69E 5E          			ld e,(hl)
0779   C69F 2B          			dec hl
0780   C6A0 7E          			ld a,(hl)
0781   C6A1 B3          			or e
0782   C6A2 21 CB F3    			ld hl,LEVEL7
0783   C6A5 20 30       			jr nz, userlevel
0784   C6A7 3A FD 3F    			ld a,(#3FFD)
0785   C6AA CB 27       			sla a
0786   C6AC 21 C5 F3    			ld hl,LEVEL6
0787   C6AF 38 26       			jr c, userlevel
0788   C6B1 CB 27       			sla a
0789   C6B3 21 BF F3    			ld hl,LEVEL5
0790   C6B6 38 1F       			jr c, userlevel
0791   C6B8 CB 27       			sla a
0792   C6BA 21 B5 F3    			ld hl,LEVEL4
0793   C6BD 38 18       			jr c, userlevel
0794   C6BF CB 27       			sla a
0795   C6C1 21 AB F3    			ld hl,LEVEL3
0796   C6C4 38 11       			jr c, userlevel
0797   C6C6 CB 27       			sla a
0798   C6C8 21 A3 F3    			ld hl,LEVEL2
0799   C6CB 38 0A       			jr c, userlevel
0800   C6CD CB 27       			sla a
0801   C6CF 21 9B F3    			ld hl,LEVEL1
0802   C6D2 38 03       			jr c, userlevel
0803   C6D4 21 94 F3    			ld hl,LEVEL0
0804   C6D7 CD 07 CC    userlevel	call txy51.txy				
0805   C6DA             			
0806   C6DA 01 00 90    			ld	bc,#9000
0807   C6DD ED 43 AB CC 			ld	(txy51.cursor),bc
0808   C6E1 21 53 F3    			ld	hl,ADVS1
0809   C6E4 CD 07 CC    			call txy51.txy
0810   C6E7             
0811   C6E7 21 FC 3F    			ld hl,#3FFC
0812   C6EA 11 7F D6    			ld de,xdec_06.zzbin
0813   C6ED 01 04 00    			ld bc,4
0814   C6F0 ED B0       			ldir
0815   C6F2 CD D2 D5    			call xdec_06.bindec
0816   C6F5 06 0A       			ld b,10
0817   C6F7 0E 20       			ld c," "
0818   C6F9 21 84 D6    			ld hl,xdec_06.zzdec
0819   C6FC 7E          1			ld a,(hl)
0820   C6FD C6 30       			add a,"0"
0821   C6FF FE 30       			cp "0"
0822   C701 20 03       			jr nz,3F
0823   C703 79          			ld a,c			
0824   C704 18 02       			jr 2F
0825   C706 0E 30       3			ld c,"0"			
0826   C708 E5          2			push hl
0827   C709 C5          			push bc
0828   C70A CD 21 CC    			call txy51.xy
0829   C70D C1          			pop bc
0830   C70E E1          			pop hl
0831   C70F 23          			inc hl
0832   C710 10 EA       			djnz 1B
0833   C712             
0834   C712 01 00 98    			ld	bc,#9800
0835   C715 ED 43 AB CC 			ld	(txy51.cursor),bc
0836   C719 21 60 F3    			ld	hl,ADVS2
0837   C71C CD 07 CC    			call txy51.txy
0838   C71F             
0839   C71F 21 F8 3F    			ld hl,#3FF8
0840   C722 11 7F D6    			ld de,xdec_06.zzbin
0841   C725 01 04 00    			ld bc,4
0842   C728 ED B0       			ldir
0843   C72A CD D2 D5    			call xdec_06.bindec
0844   C72D 06 0A       			ld b,10
0845   C72F 0E 20       			ld c," "
0846   C731 21 84 D6    			ld hl,xdec_06.zzdec
0847   C734 7E          1			ld a,(hl)
0848   C735 C6 30       			add a,"0"
0849   C737 FE 30       			cp "0"
0850   C739 20 03       			jr nz,3F
0851   C73B 79          			ld a,c			
0852   C73C 18 02       			jr 2F
0853   C73E 0E 30       3			ld c,"0"			
0854   C740 E5          2			push hl
0855   C741 C5          			push bc
0856   C742 CD 21 CC    			call txy51.xy
0857   C745 C1          			pop bc
0858   C746 E1          			pop hl
0859   C747 23          			inc hl
0860   C748 10 EA       			djnz 1B
0861   C74A             
0862   C74A 01 00 A0    			ld	bc,#A000
0863   C74D ED 43 AB CC 			ld	(txy51.cursor),bc
0864   C751 21 6D F3    			ld	hl,ADVS3
0865   C754 CD 07 CC    			call txy51.txy
0866   C757             
0867   C757 21 F4 3F    			ld hl,#3FF4
0868   C75A 11 7F D6    			ld de,xdec_06.zzbin
0869   C75D 01 04 00    			ld bc,4
0870   C760 ED B0       			ldir
0871   C762 CD D2 D5    			call xdec_06.bindec
0872   C765 06 0A       			ld b,10
0873   C767 0E 20       			ld c," "
0874   C769 21 84 D6    			ld hl,xdec_06.zzdec
0875   C76C 7E          1			ld a,(hl)
0876   C76D C6 30       			add a,"0"
0877   C76F FE 30       			cp "0"
0878   C771 20 03       			jr nz,3F
0879   C773 79          			ld a,c			
0880   C774 18 02       			jr 2F
0881   C776 0E 30       3			ld c,"0"			
0882   C778 E5          2			push hl
0883   C779 C5          			push bc
0884   C77A CD 21 CC    			call txy51.xy
0885   C77D C1          			pop bc
0886   C77E E1          			pop hl
0887   C77F 23          			inc hl
0888   C780 10 EA       			djnz 1B
0889   C782             
0890   C782 01 00 A8    			ld	bc,#A800
0891   C785 ED 43 AB CC 			ld	(txy51.cursor),bc
0892   C789 21 7A F3    			ld	hl,ADVS4
0893   C78C CD 07 CC    			call txy51.txy
0894   C78F             
0895   C78F 21 F0 3F    			ld hl,#3FF0
0896   C792 11 7F D6    			ld de,xdec_06.zzbin
0897   C795 01 04 00    			ld bc,4
0898   C798 ED B0       			ldir
0899   C79A CD D2 D5    			call xdec_06.bindec
0900   C79D 06 0A       			ld b,10
0901   C79F 0E 20       			ld c," "
0902   C7A1 21 84 D6    			ld hl,xdec_06.zzdec
0903   C7A4 7E          1			ld a,(hl)
0904   C7A5 C6 30       			add a,"0"
0905   C7A7 FE 30       			cp "0"
0906   C7A9 20 03       			jr nz,3F
0907   C7AB 79          			ld a,c			
0908   C7AC 18 02       			jr 2F
0909   C7AE 0E 30       3			ld c,"0"			
0910   C7B0 E5          2			push hl
0911   C7B1 C5          			push bc
0912   C7B2 CD 21 CC    			call txy51.xy
0913   C7B5 C1          			pop bc
0914   C7B6 E1          			pop hl
0915   C7B7 23          			inc hl
0916   C7B8 10 EA       			djnz 1B
0917   C7BA             
0918   C7BA 01 00 B0    			ld	bc,#B000
0919   C7BD ED 43 AB CC 			ld	(txy51.cursor),bc
0920   C7C1 21 87 F3    			ld	hl,ADVS5
0921   C7C4 CD 07 CC    			call txy51.txy
0922   C7C7             
0923   C7C7 21 EC 3F    			ld hl,#3FEC
0924   C7CA 11 7F D6    			ld de,xdec_06.zzbin
0925   C7CD 01 04 00    			ld bc,4
0926   C7D0 ED B0       			ldir
0927   C7D2 CD D2 D5    			call xdec_06.bindec
0928   C7D5 06 0A       			ld b,10
0929   C7D7 0E 20       			ld c," "
0930   C7D9 21 84 D6    			ld hl,xdec_06.zzdec
0931   C7DC 7E          1			ld a,(hl)
0932   C7DD C6 30       			add a,"0"
0933   C7DF FE 30       			cp "0"
0934   C7E1 20 03       			jr nz,3F
0935   C7E3 79          			ld a,c			
0936   C7E4 18 02       			jr 2F
0937   C7E6 0E 30       3			ld c,"0"			
0938   C7E8 E5          2			push hl
0939   C7E9 C5          			push bc
0940   C7EA CD 21 CC    			call txy51.xy
0941   C7ED C1          			pop bc
0942   C7EE E1          			pop hl
0943   C7EF 23          			inc hl
0944   C7F0 10 EA       			djnz 1B
0945   C7F2             
0946   C7F2 CD 2B CB    			call iinkey.ANYKEY
0947   C7F5 C3 5B C6    			jp 13B
0948   C7F8             
0949   C7F8 FE 40       14			cp "@"					//DivIDE
0950   C7FA C2 7E C3    			jp nz, loopkey
0951   C7FD             			
0952   C7FD CD 15 CA    			call clean
0953   C800 01 00 B8    			ld bc,#B800
0954   C803 ED 43 77 D5 			ld	(txy32.cursor),bc
0955   C807 21 AB F1    			LD HL, STRIPS
0956   C80A CD B1 D4    			call txy32.txy
0957   C80D 01 00 BF    			ld bc,#BF00
0958   C810 11 FF BF    			ld de,#BFFF
0959   C813 CD 49 CA    			call draw_jugo.DRAW				
0960   C816 11 00 0E    			ld de,#0E00
0961   C819 21 C3 E5    	        ld hl,EsxLogo
0962   C81C CD 8E D5    			call sprite2.OK
0963   C81F 01 58 94    			ld	bc,#9458
0964   C822 ED 43 AB CC 			ld	(txy51.cursor),bc
0965   C826 21 DF F3    			ld	hl,ESX1
0966   C829 CD 07 CC    			call txy51.txy					
0967   C82C             
0968   C82C CD 38 CB    holdkey2	call iinkey.IINKEY
0969   C82F 20 FB       			jr nz,holdkey2	
0970   C831 AF          			xor a
0971   C832             //			out (23),a
0972   C832 01 3B 20    			ld bc,#203B				//ZXi portselect
0973   C835 ED 79       			out (c),a
0974   C837 01 3B 21    			ld bc,#213B
0975   C83A 3E 03       			ld a,3					//HW - 3 - DIVMMC/DIVIDE
0976   C83C ED 79       			out (c),a
0977   C83E             
0978   C83E 01 3B 20    			ld bc,#203B				//ZXi portselect 
0979   C841 3E 02       			ld a,2
0980   C843 ED 79       			out (c),a
0981   C845 01 3B 21    			ld bc,#213B
0982   C848 3E 02       			ld a,2					//IDE - 2 PVL ports- DIVMMC/DIVIDE
0983   C84A ED 79       			out (c),a
0984   C84C             
0985   C84C 01 3B 20    			ld bc,#203B				//ZXi portselect 
0986   C84F 3E 01       			ld a,1					//Audio
0987   C851 ED 79       			out (c),a
0988   C853 01 3B 21    			ld bc,#213B
0989   C856 3E EF       			ld a,%11101111  		//dissable GS
0990   C858 ED 79       			out (c),a
0991   C85A             
0992   C85A 3E 80       			ld a,128
0993   C85C D3 E3       div_erase2	out (#E3),a
0994   C85E 21 00 20    			ld hl,8192
0995   C861 11 01 20    			ld de,8193
0996   C864 01 FF 1F    			ld bc,8191
0997   C867 75          			ld (hl),l
0998   C868 ED B0       			ldir
0999   C86A 3C          			inc a
1000   C86B FE 85       			cp 128+5
1001   C86D 20 ED       			jr nz,div_erase2			//delete first 32KB od DivIde RAM
1002   C86F AF          			xor a						//is enought to erase bank0 or
1003   C870 D3 E3       			out (#E3),a					//to force cold start zero $2dXX in page 0
1004   C872 C7          			rst 0
1005   C873             
1006   C873             ;------------------------------
1007   C873             ;HL-HODNOTA
1008   C873             ;TISKNE CISLO TYPU INTEGER
1009   C873 11 F0 D8    NUMBER4  ld   de,-10000
1010   C876 CD 91 C8             call NUM_JED
1011   C879 11 18 FC    NUMBER3  ld   de,-1000
1012   C87C CD 91 C8             call NUM_JED
1013   C87F 11 9C FF    NUMBER2  ld   de,-100
1014   C882 CD 91 C8             call NUM_JED
1015   C885 11 F6 FF    NUMBER1  ld   de,-10
1016   C888 CD 91 C8             call NUM_JED
1017   C88B 7D          NUMBER0  ld   a,l
1018   C88C C6 30                add  a,48
1019   C88E C3 21 CC             jp   txy51.xy
1020   C891             
1021   C891 AF          NUM_JED  xor  a
1022   C892 19          NUM_JED1 add  hl,de
1023   C893 30 03                jr   nc,NUM_PRIC
1024   C895 3C                   inc  a
1025   C896 18 FA                jr   NUM_JED1
1026   C898 ED 52       NUM_PRIC sbc  hl,de
1027   C89A C6 30                add  a,48
1028   C89C C5                   push bc
1029   C89D E5                   push hl
1030   C89E CD 21 CC             call txy51.xy
1031   C8A1 E1                   pop  hl
1032   C8A2 C1                   pop  bc
1033   C8A3                      ;;inc  c
1034   C8A3 C9                   ret
1035   C8A4             
1036   C8A4             clock
1037   C8A4 DD 21 E3 C9 			ld ix,clockbuff
1038   C8A8 AF          			xor a
1039   C8A9 01 3B 20    			ld bc,#203B
1040   C8AC ED 79       			out (c),a
1041   C8AE 01 3B 27    			ld bc,#273B
1042   C8B1 ED 78       			in a,(c)
1043   C8B3 F5          			push af
1044   C8B4 E6 0F       			and #0F
1045   C8B6 F6 B0       			or #B0
1046   C8B8 DD 77 15    			ld (ix+21),a		//1sec
1047   C8BB F1          			pop af
1048   C8BC CB 1F       			rr a
1049   C8BE CB 1F       			rr a
1050   C8C0 CB 1F       			rr a
1051   C8C2 CB 1F       			rr a
1052   C8C4 E6 07       			and #07
1053   C8C6 F6 30       			or 48
1054   C8C8 DD 77 14    			ld (ix+20),a		//10sec
1055   C8CB 3E 01       			ld a,1
1056   C8CD 01 3B 20    			ld bc,#203B
1057   C8D0 ED 79       			out (c),a
1058   C8D2 01 3B 27    			ld bc,#273B
1059   C8D5 ED 78       			in a,(c)
1060   C8D7 F5          			push af			
1061   C8D8 E6 0F       			and #0F
1062   C8DA F6 30       			or 48
1063   C8DC DD 77 12    			ld (ix+18),a		//1min
1064   C8DF F1          			pop af
1065   C8E0 CB 1F       			rr a
1066   C8E2 CB 1F       			rr a
1067   C8E4 CB 1F       			rr a
1068   C8E6 CB 1F       			rr a
1069   C8E8 E6 07       			and #07
1070   C8EA F6 30       			or 48
1071   C8EC DD 77 11    			ld (ix+17),a		//10min
1072   C8EF 3E 02       			ld a,2
1073   C8F1 01 3B 20    			ld bc,#203B
1074   C8F4 ED 79       			out (c),a
1075   C8F6 01 3B 27    			ld bc,#273B
1076   C8F9 ED 78       			in a,(c)
1077   C8FB F5          			push af
1078   C8FC E6 0F       			and #0F
1079   C8FE F6 30       			or 48
1080   C900 DD 77 0F    			ld (ix+15),a		//1hour
1081   C903 F1          			pop af
1082   C904 CB 1F       			rr a
1083   C906 CB 1F       			rr a
1084   C908 CB 1F       			rr a
1085   C90A CB 1F       			rr a
1086   C90C E6 07       			and #07
1087   C90E F6 30       			or 48
1088   C910 DD 77 0E    			ld (ix+14),a		//10hour
1089   C913 3E 03       			ld a,3
1090   C915 01 3B 20    			ld bc,#203B
1091   C918 ED 79       			out (c),a
1092   C91A 01 3B 27    			ld bc,#273B
1093   C91D ED 78       			in a,(c)
1094   C91F 3D          			dec a
1095   C920 E6 07       			and #7
1096   C922 CB 27       			sla	a
1097   C924 CB 27       			sla	a
1098   C926 21 F9 C9    			ld hl, weekdays
1099   C929 16 00       			ld d,0
1100   C92B 5F          			ld e,a
1101   C92C 19          			add hl,de
1102   C92D 11 ED C9    			ld de, clockbuff2
1103   C930 01 04 00    			ld bc,4
1104   C933 ED B0       			ldir
1105   C935 3E 04       			ld a,4
1106   C937 01 3B 20    			ld bc,#203B
1107   C93A ED 79       			out (c),a
1108   C93C 01 3B 27    			ld bc,#273B
1109   C93F ED 78       			in a,(c)
1110   C941 F5          			push af
1111   C942 E6 0F       			and #0F
1112   C944 F6 30       			or 48
1113   C946 DD 77 01    			ld (ix+1),a		//1day
1114   C949 F1          			pop af
1115   C94A CB 1F       			rr a
1116   C94C CB 1F       			rr a
1117   C94E CB 1F       			rr a
1118   C950 CB 1F       			rr a
1119   C952 E6 03       			and #03
1120   C954 F6 30       			or 48
1121   C956 DD 77 00    			ld (ix+0),a		//10day	
1122   C959 3E 05       			ld a,5
1123   C95B 01 3B 20    			ld bc,#203B
1124   C95E ED 79       			out (c),a
1125   C960 01 3B 27    			ld bc,#273B
1126   C963 ED 78       			in a,(c)
1127   C965 F5          			push af
1128   C966 E6 0F       			and #0F
1129   C968 F6 30       			or 48
1130   C96A DD 77 04    			ld (ix+4),a		//1month
1131   C96D F1          			pop af
1132   C96E CB 1F       			rr a
1133   C970 CB 1F       			rr a
1134   C972 CB 1F       			rr a
1135   C974 CB 1F       			rr a
1136   C976 E6 01       			and #01
1137   C978 F6 30       			or 48
1138   C97A DD 77 03    			ld (ix+3),a		//10month
1139   C97D 3E 06       			ld a,6
1140   C97F 01 3B 20    			ld bc,#203B
1141   C982 ED 79       			out (c),a
1142   C984 01 3B 27    			ld bc,#273B
1143   C987 ED 78       			in a,(c)
1144   C989 F5          			push af
1145   C98A E6 0F       			and #0F
1146   C98C F6 B0       			or #B0
1147   C98E DD 77 09    			ld (ix+9),a		//1year
1148   C991 F1          			pop af
1149   C992 CB 1F       			rr a
1150   C994 CB 1F       			rr a
1151   C996 CB 1F       			rr a
1152   C998 CB 1F       			rr a
1153   C99A E6 0F       			and #0F
1154   C99C F6 30       			or 48
1155   C99E DD 77 08    			ld (ix+8),a		//10year
1156   C9A1             
1157   C9A1             //			ld a,1
1158   C9A1             //			out (254),a
1159   C9A1             
1160   C9A1 3E 06       			ld a,6			//clear place
1161   C9A3 21 3B 4A    			ld hl, 16384+2048+32+512+27
1162   C9A6 11 3C 4A    			ld de, 16384+2048+32+512+27+1
1163   C9A9 01 04 00    			ld bc,4
1164   C9AC 36 00       1B			ld (hl),0
1165   C9AE C5          			push bc
1166   C9AF ED B0       			ldir
1167   C9B1 C1          			pop bc
1168   C9B2 ED 42       			sbc hl,bc
1169   C9B4 24          			inc h
1170   C9B5 54          			ld d,h
1171   C9B6 5D          			ld e,l
1172   C9B7 1C          			inc e
1173   C9B8 3D          			dec a
1174   C9B9 20 F1       			jr nz, 1B
1175   C9BB             
1176   C9BB             //			ld a,2
1177   C9BB             //			out (254),a
1178   C9BB             
1179   C9BB 01 D8 49    			ld	bc,#49D8	//print clock
1180   C9BE ED 43 AB CC 			ld	(txy51.cursor),bc	
1181   C9C2 21 F1 C9    			ld hl,clockbuff3
1182   C9C5 CD 07 CC    			call txy51.txy
1183   C9C8             //			ld a,3
1184   C9C8             //			out (254),a
1185   C9C8 01 90 49    			ld	bc,#4990
1186   C9CB ED 43 AB CC 			ld	(txy51.cursor),bc			
1187   C9CF 21 E3 C9    			ld hl,clockbuff
1188   C9D2 CD 07 CC    			call txy51.txy
1189   C9D5             //			ld a,4
1190   C9D5             //			out (254),a
1191   C9D5 01 C5 49    			ld	bc,#49C5
1192   C9D8 ED 43 AB CC 			ld	(txy51.cursor),bc			
1193   C9DC 21 ED C9    			ld hl,clockbuff2
1194   C9DF CD 07 CC    			call txy51.txy
1195   C9E2             			
1196   C9E2 C9          			ret
1197   C9E3             clockbuff	dc "22/05/2073" 
1197   C9E3 32322F30352F323037B3
1198   C9ED 54 75 65 A0 clockbuff2	dc "Tue "
1199   C9F1             clockbuff3	dc "16:33:26"
1199   C9F1 31363A33333A32B6
1200   C9F9 53 75 6E A0 weekdays	dc "Sun "
1201   C9FD 4D 6F 6E A0 			dc "Mon "
1202   CA01 54 75 65 A0 			dc "Tue "
1203   CA05 57 65 64 A0 			dc "Wed "
1204   CA09 54 68 75 A0 			dc "Thu "
1205   CA0D 46 72 69 A0 			dc "Fri "
1206   CA11 53 61 74 A0 			dc "Sat "
1207   CA15             
1208   CA15 3E 07       clean		ld a,7			//clear place
1209   CA17 21 20 49    			ld hl, 16384+2048+32+256+0
1210   CA1A 11 21 49    			ld de, 16384+2048+32+256+0+1
1211   CA1D 01 DF 00    			ld bc,255-32
1212   CA20 36 00       1B			ld (hl),0
1213   CA22 C5          			push bc
1214   CA23 ED B0       			ldir
1215   CA25 C1          			pop bc
1216   CA26 ED 42       			sbc hl,bc
1217   CA28 24          			inc h
1218   CA29 54          			ld d,h
1219   CA2A 5D          			ld e,l
1220   CA2B 1C          			inc e
1221   CA2C 3D          			dec a
1222   CA2D 20 F1       			jr nz, 1B
1223   CA2F 21 40 48    			ld hl, 16384+2048+64+0
1224   CA32 11 41 48    			ld de, 16384+2048+64+0+1
1225   CA35 01 BF 00    			ld bc,255-64
1226   CA38 36 00       			ld (hl),0
1227   CA3A ED B0       			ldir
1228   CA3C 21 00 50    			ld hl, 16384+4096
1229   CA3F 11 01 50    			ld de, 16384+4096+1
1230   CA42 01 FF 07    			ld bc,2047
1231   CA45 75          			ld (hl),l
1232   CA46 ED B0       			ldir					
1233   CA48 C9          			ret	
1234   CA49             ; --------------- L I B R A R I E S ---------------------------------------	
1235   CA49             	
1236   CA49             //INCLUDE "nasobeniHLDE.a80"
1237   CA49             	INCLUDE "draw-jugo.a80"
0001+  CA49             ;rutina na kresleni cary. pochazi z nejakeho jugoslavskeho casaku
0002+  CA49             ;BC-ODKUD DE-KAM NAKRESLI CARU
0003+  CA49             ;POCATEK VLEVO NAHORE (0,0)
0004+  CA49             	module draw_jugo
0005+  CA49 7A          DRAW     LD   A,D
0006+  CA4A FE C0                CP   192
0007+  CA4C D0                   RET  NC
0008+  CA4D 78                   LD   A,B
0009+  CA4E FE C0                CP   192
0010+  CA50 D0                   RET  NC
0011+  CA51 3F                   CCF
0012+  CA52 1F                   RRA
0013+  CA53 37                   SCF
0014+  CA54 1F                   RRA
0015+  CA55 A7                   AND  A
0016+  CA56 1F                   RRA
0017+  CA57 A8                   XOR  B
0018+  CA58 E6 F8                AND  248
0019+  CA5A A8                   XOR  B
0020+  CA5B 67                   LD   H,A
0021+  CA5C 79                   LD   A,C
0022+  CA5D 07                   RLCA
0023+  CA5E 07                   RLCA
0024+  CA5F 07                   RLCA
0025+  CA60 6F                   LD   L,A
0026+  CA61 E6 38                AND  56
0027+  CA63 2F                   CPL
0028+  CA64 32 69 CA             LD   (LAB+1),A
0029+  CA67 AF                   XOR  A
0030+  CA68 CB C7       LAB      SET  0,A
0031+  CA6A 08                   EX   AF,AF'
0032+  CA6B 7D                   LD   A,L
0033+  CA6C A8                   XOR  B
0034+  CA6D E6 C7                AND  199
0035+  CA6F A8                   XOR  B
0036+  CA70 07                   RLCA
0037+  CA71 07                   RLCA
0038+  CA72 6F                   LD   L,A
0039+  CA73 78                   LD   A,B
0040+  CA74 92                   SUB  D
0041+  CA75 06 00                LD   B,0
0042+  CA77 30 03                JR   NC,N1
0043+  CA79 ED 44                NEG
0044+  CA7B 04                   INC  B
0045+  CA7C 57          N1       LD   D,A
0046+  CA7D 79                   LD   A,C
0047+  CA7E 93                   SUB  E
0048+  CA7F 0E 00                LD   C,0
0049+  CA81 30 03                JR   NC,N2
0050+  CA83 ED 44                NEG
0051+  CA85 0C                   INC  C
0052+  CA86 5F          N2       LD   E,A
0053+  CA87 08                   EX   AF,AF'
0054+  CA88 F5                   PUSH AF
0055+  CA89 B6                   OR   (HL)
0056+  CA8A 77                   LD   (HL),A
0057+  CA8B F1                   POP  AF
0058+  CA8C 08                   EX   AF,AF'
0059+  CA8D B2                   OR   D
0060+  CA8E C8                   RET  Z
0061+  CA8F E5                   PUSH HL
0062+  CA90 7A                   LD   A,D
0063+  CA91 BB                   CP   E
0064+  CA92 38 37                JR   C,POX
0065+  CA94 21 EF CA             LD   HL,LEVO
0066+  CA97 CB 41                BIT  0,C
0067+  CA99 28 03                JR   Z,Y1
0068+  CA9B 21 EA CA             LD   HL,DESNO
0069+  CA9E 22 BE CA    Y1       LD   (DIA+1),HL
0070+  CAA1 21 07 CB             LD   HL,GORE
0071+  CAA4 CB 40                BIT  0,B
0072+  CAA6 28 03                JR   Z,Y2
0073+  CAA8 21 F4 CA             LD   HL,DOLE
0074+  CAAB 22 C1 CA    Y2       LD   (NAST+1),HL
0075+  CAAE 4A                   LD   C,D
0076+  CAAF CB 39       N3       SRL  C
0077+  CAB1 DD 62                LD   HX,D
0078+  CAB3 08                   EX   AF,AF'
0079+  CAB4 47                   LD   B,A
0080+  CAB5 E1                   POP  HL
0081+  CAB6 79          LOOP     LD   A,C
0082+  CAB7 93                   SUB  E
0083+  CAB8 4F                   LD   C,A
0084+  CAB9 30 05                JR   NC,NAST
0085+  CABB 82                   ADD  A,D
0086+  CABC 4F                   LD   C,A
0087+  CABD CD 00 00    DIA      CALL 0
0088+  CAC0 CD 00 00    NAST     CALL 0
0089+  CAC3 78                   LD   A,B
0090+  CAC4 B6                   OR   (HL)
0091+  CAC5 77                   LD   (HL),A
0092+  CAC6 DD 25                DEC  HX
0093+  CAC8 20 EC                JR   NZ,LOOP
0094+  CACA C9                   RET
0095+  CACB 21 EF CA    POX      LD   HL,LEVO
0096+  CACE CB 41                BIT  0,C
0097+  CAD0 28 03                JR   Z,X1
0098+  CAD2 21 EA CA             LD   HL,DESNO
0099+  CAD5 22 C1 CA    X1       LD   (NAST+1),HL
0100+  CAD8 21 07 CB             LD   HL,GORE
0101+  CADB CB 40                BIT  0,B
0102+  CADD 28 03                JR   Z,X2
0103+  CADF 21 F4 CA             LD   HL,DOLE
0104+  CAE2 22 BE CA    X2       LD   (DIA+1),HL
0105+  CAE5 4B                   LD   C,E
0106+  CAE6 5A                   LD   E,D
0107+  CAE7 51                   LD   D,C
0108+  CAE8 18 C5                JR   N3
0109+  CAEA CB 08       DESNO    RRC  B
0110+  CAEC D0                   RET  NC
0111+  CAED 23                   INC  HL
0112+  CAEE C9                   RET
0113+  CAEF CB 00       LEVO     RLC  B
0114+  CAF1 D0                   RET  NC
0115+  CAF2 2B                   DEC  HL
0116+  CAF3 C9                   RET
0117+  CAF4 24          DOLE     INC  H
0118+  CAF5 7C                   LD   A,H
0119+  CAF6 E6 07                AND  7
0120+  CAF8 C0                   RET  NZ
0121+  CAF9 7C                   LD   A,H
0122+  CAFA D6 08                SUB  8
0123+  CAFC 67                   LD   H,A
0124+  CAFD 7D                   LD   A,L
0125+  CAFE C6 20                ADD  A,32
0126+  CB00 6F                   LD   L,A
0127+  CB01 D0                   RET  NC
0128+  CB02 7C                   LD   A,H
0129+  CB03 C6 08                ADD  A,8
0130+  CB05 67                   LD   H,A
0131+  CB06 C9                   RET
0132+  CB07 25          GORE     DEC  H
0133+  CB08 7C                   LD   A,H
0134+  CB09 2F                   CPL
0135+  CB0A E6 07                AND  7
0136+  CB0C C0                   RET  NZ
0137+  CB0D 7C                   LD   A,H
0138+  CB0E C6 08                ADD  A,8
0139+  CB10 67                   LD   H,A
0140+  CB11 7D                   LD   A,L
0141+  CB12 D6 20                SUB  32
0142+  CB14 6F                   LD   L,A
0143+  CB15 D0                   RET  NC
0144+  CB16 7C                   LD   A,H
0145+  CB17 D6 08                SUB  8
0146+  CB19 67                   LD   H,A
0147+  CB1A C9                   RET
0148+  CB1B             	endmodule
0149+  CB1B             
1238   CB1B             	INCLUDE "cls.a80"
0001+  CB1B             	module cls
0002+  CB1B             CLS     
0003+  CB1B AF                  xor  a
0004+  CB1C D3 FE               out  (254),a
0005+  CB1E 21 FF 5A    		ld	hl, 5AFFh
0006+  CB21 11 FE 5A    		ld	de, 5AFEh
0007+  CB24 01 FF 1A    		ld	bc, 1AFFh
0008+  CB27 77          		ld	(hl), a
0009+  CB28 ED B8       		lddr			; Clear	videoram (black	screen)
0010+  CB2A C9          		ret
0011+  CB2B                     
0012+  CB2B             	endmodule
1239   CB2B             	INCLUDE "iinkey.a80"
0001+  CB2B             	module iinkey
0002+  CB2B CD 38 CB    ANYKEY   call IINKEY
0003+  CB2E 28 FB                jr   z,ANYKEY
0004+  CB30 F5                   push af
0005+  CB31 CD 38 CB    ANYKEY_0 call IINKEY
0006+  CB34 20 FB                jr   nz,ANYKEY_0
0007+  CB36 F1                   pop  af
0008+  CB37 C9                   ret
0009+  CB38             ;------------------------------
0010+  CB38 E5          IINKEY   push hl
0011+  CB39 D5                   push de
0012+  CB3A C5                   push bc
0013+  CB3B 01 FE 7F             ld   bc,#7FFE
0014+  CB3E 26 00                ld   h,0
0015+  CB40 54                   ld   d,h
0016+  CB41 5C                   ld   e,h
0017+  CB42 2E 05       II1      ld   l,5
0018+  CB44 ED 78                in   a,(c)
0019+  CB46 24          II2      inc  h
0020+  CB47 0F                   rrca
0021+  CB48 38 02                jr   c,II3
0022+  CB4A 53                   ld   d,e
0023+  CB4B 5C                   ld   e,h
0024+  CB4C 2D          II3      dec  l
0025+  CB4D 20 F7                jr   nz,II2
0026+  CB4F CB 08                rrc  b
0027+  CB51 38 EF                jr   c,II1
0028+  CB53 7B                   ld   a,e
0029+  CB54 FE 24                cp   #24
0030+  CB56 20 03                jr   nz,II5
0031+  CB58 5A                   ld   e,d
0032+  CB59 16 24                ld   d,#24
0033+  CB5B FE 02       II5      cp   2
0034+  CB5D 20 03                jr   nz,II6
0035+  CB5F 5A                   ld   e,d
0036+  CB60 16 02                ld   d,2
0037+  CB62 21 84 CB    II6      ld   hl,IINN
0038+  CB65 AF                   xor  a
0039+  CB66 AA                   xor  d
0040+  CB67 28 12                jr   z,II7
0041+  CB69 21 D6 CB             ld   hl,IISS
0042+  CB6C FE 02                cp   2
0043+  CB6E 28 0B                jr   z,II7
0044+  CB70 21 AD CB             ld   hl,IICS
0045+  CB73 FE 24                cp   #24
0046+  CB75 28 04                jr   z,II7
0047+  CB77 3E 01                ld   a,1
0048+  CB79 18 04                jr   II8
0049+  CB7B             
0050+  CB7B 16 00       II7      ld   d,0
0051+  CB7D 19                   add  hl,de
0052+  CB7E 7E                   ld   a,(hl)
0053+  CB7F A7          II8      and  a
0054+  CB80 C1                   pop  bc
0055+  CB81 D1                   pop  de
0056+  CB82 E1                   pop  hl
0057+  CB83 C9                   ret
0058+  CB84             
0059+  CB84 00 20 1C    IINN     defb 0," ",#1C
0060+  CB87 6D 6E 62             defb "mnb"
0061+  CB8A 0D                   defb 13
0062+  CB8B 6C 6B 6A 68          defb "lkjh"
0063+  CB8F 706F697579           defb "poiuy"
0064+  CB94 3039383736           defb "09876"
0065+  CB99 3132333435           defb "12345"
0066+  CB9E 7177657274           defb "qwert"
0067+  CBA3 6173646667           defb "asdfg"
0068+  CBA8 00                   defb 0
0069+  CBA9 7A 78 63 76          defb "zxcv"
0070+  CBAD             
0071+  CBAD 00 11 0E    IICS     defb 0,#11,#0E
0072+  CBB0 4D 4E 42             defb "MNB"
0073+  CBB3 02                   defb 2
0074+  CBB4 4C 4B 4A 48          defb "LKJH"
0075+  CBB8 504F495559           defb "POIUY"
0076+  CBBD 0C0F090B0A           defb #0C,#0F,9,#0B,#0A
0077+  CBC2 0706040508           defb 7,6,4,5,8
0078+  CBC7 5157455254           defb "QWERT"
0079+  CBCC 4153444647           defb "ASDFG"
0080+  CBD1 1F                   defb #1F
0081+  CBD2 5A 58 43 56          defb "ZXCV"
0082+  CBD6             
0083+  CBD6 00 10 1E    IISS     defb 0,16,#1E
0084+  CBD9 2E 2C 2A             defb ".,*"
0085+  CBDC 03                   defb 3
0086+  CBDD 3D 2B 2D 5E          defb "=+-^"
0087+  CBE1 22                   defb 34 ;"
0088+  CBE2 3B 7F 7D 7B          defb ";}{"
0089+  CBE6 5F29282726           defb "_)('&"
0090+  CBEB 2140232425           defb "!@#$%"
0091+  CBF0 12 13 14             defb #12,#13,#14
0092+  CBF3 3C 3E                defb "<>"
0093+  CBF5 7E 7C                defb "~|"
0094+  CBF7 5C                   defb 92 ;\
0095+  CBF8 7B                   defb 123 ;{
0096+  CBF9 7D                   defb 125 ;}
0097+  CBFA 1D                   defb #1D
0098+  CBFB 3A 60 3F 2F          defb ":`?/"
0099+  CBFF             
0100+  CBFF             	endmodule
1240   CBFF             	INCLUDE "wait.a80"
0001+  CBFF             	module wait
0002+  CBFF             wait
0003+  CBFF             //	ex (SP),IX
0004+  CBFF             //	ex (SP),IX
0005+  CBFF 2B          	dec hl
0006+  CC00 7C          	ld a,h
0007+  CC01 BD          	cp l
0008+  CC02 20 FB       	jr nz,wait
0009+  CC04 10 F9       	djnz wait
0010+  CC06 C9          	ret
0011+  CC07             
0012+  CC07             	endmodule
1241   CC07             //	INCLUDE "t42.a80"
1242   CC07             //	INCLUDE "txy.a80"
1243   CC07             	INCLUDE "txy51.a80"
0001+  CC07             ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0002+  CC07             ; Poziciovy print 42*27 znakov ;
0003+  CC07             ;  + znakovy subor 6*7 bodov   ;
0004+  CC07             ; (vytvoreny pre disasembler)  ;
0005+  CC07             ; . -28.05.1988- Busy software ;
0006+  CC07             ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0007+  CC07             ;DEMO:napiste:asm,dbg,rpp,g
0008+  CC07             //Original by BusySoft
0009+  CC07             	MODULE txy51
0010+  CC07 7E          txy	 	 ld   a,(hl)
0011+  CC08 E6 7F                and  127
0012+  CC0A             /*         cp   13
0013+  CC0A                      jr   z,T42_ZMEN */
0014+  CC0A FE 10                cp   16
0015+  CC0C 28 0B                jr	  z,colorchange
0016+  CC0E E5                   push hl
0017+  CC0F CD 21 CC             call xy
0018+  CC12 E1                   pop  hl
0019+  CC13             /*         ld   a,(T42_BORE)
0020+  CC13~                     dec  a
0021+  CC13~                     cp   c
0022+  CC13~                     jr   c,T42_ZMEN
0023+  CC13                      inc  c */
0024+  CC13 7E          T42_BACK ld   a,(hl)
0025+  CC14 17                   rla
0026+  CC15 D8                   ret  c
0027+  CC16 23                   inc  hl
0028+  CC17 18 EE                jr   txy
0029+  CC19             
0030+  CC19             colorchange
0031+  CC19 23          			inc hl
0032+  CC1A 7E          			ld a,(hl)
0033+  CC1B 32 20 CC    			ld (T42_ATT),a
0034+  CC1E 18 F3       			jr T42_BACK	
0035+  CC20 00          T42_ATT		defb 0	
0036+  CC21             
0037+  CC21             //exampleBusy
0038+  CC21             /*
0039+  CC21~            start	ld	hl,#4000
0040+  CC21~            	ld	de,#4001
0041+  CC21~            	ld	bc,#17ff
0042+  CC21~            	ld	(hl),#00
0043+  CC21~            	ldir
0044+  CC21~            	ld	hl,#0202
0045+  CC21~            	ld	(cursor),hl
0046+  CC21~            	ld	hl,text
0047+  CC21~            aaa	ld	a,(hl)
0048+  CC21~            	call	xy
0049+  CC21~            	inc	hl
0050+  CC21~            	jr	nz,aaa
0051+  CC21~            	ld	a,' '
0052+  CC21~            bbb	ld	b,a
0053+  CC21~            	call	xy
0054+  CC21~            	ld	a,b
0055+  CC21~            	inc	a
0056+  CC21~            	cp	#80
0057+  CC21~            	jr	c,bbb
0058+  CC21~            	ld	hl,#2758
0059+  CC21~            	exx
0060+  CC21~            	ret
0061+  CC21~            
0062+  CC21~            text	db	'*** Rutina print'
0063+  CC21~            		db	' 42*27 znakov v '
0064+  CC21~            		db	'obraze ***'
0065+  CC21~            		db	'        Priklad '
0066+  CC21~            		db	'vypisu:         '
0067+  CC21~            		db	'          '
0068+  CC21~            		db	#00
0069+  CC21             		*/
0070+  CC21             ;main code
0071+  CC21 A7          xy	and	a
0072+  CC22 C8          	ret	z
0073+  CC23 D9          	exx
0074+  CC24 ED 4B AB CC 	ld	bc,(cursor)
0075+  CC28 11 B1 CC    xy8	ld	de,znaky
0076+  CC2B 26 00       	ld	h,#00
0077+  CC2D 6F          	ld	l,a
0078+  CC2E 29          	add	hl,hl
0079+  CC2F 29          	add	hl,hl
0080+  CC30 29          	add	hl,hl
0081+  CC31 19          	add	hl,de
0082+  CC32 E5          	push	hl
0083+  CC33 FD E1       	pop	iy
0084+  CC35 DD 26 08    	ld	xh,#08
0085+  CC38 78          xy8dd	ld	a,b
0086+  CC39 FE C0       	cp	#c0
0087+  CC3B 30 38       	jr	nc,xyend
0088+  CC3D             ;	call	#22b1
0089+  CC3D             
0090+  CC3D A7          	and a
0091+  CC3E 1F          	rra
0092+  CC3F 37          	scf
0093+  CC40 1F          	rra
0094+  CC41 A7          	and a
0095+  CC42 1F          	rra
0096+  CC43 A8          	xor b
0097+  CC44 E6 F8       	and 248
0098+  CC46 A8          	xor b
0099+  CC47 67          	ld h,a
0100+  CC48 79          	ld a,c
0101+  CC49 07          	rlca
0102+  CC4A 07          	rlca
0103+  CC4B 07          	rlca
0104+  CC4C A8          	xor b
0105+  CC4D E6 C7       	and 199
0106+  CC4F A8          	xor b
0107+  CC50 07          	rlca
0108+  CC51 07          	rlca
0109+  CC52 6F          	ld l,a
0110+  CC53 79          	ld a,c
0111+  CC54 E6 07       	and 07
0112+  CC56             
0113+  CC56 FD 56 00    	ld	d,(iy+#00)
0114+  CC59 1E 00       	ld	e,#00
0115+  CC5B 28 07       	jr	z,xy8bb
0116+  CC5D CB 1A       xy8cc	rr	d
0117+  CC5F CB 1B       	rr	e
0118+  CC61 3D          	dec	a
0119+  CC62 20 F9       	jr	nz,xy8cc
0120+  CC64 7A          xy8bb	ld	a,d
0121+  CC65 B6          	or	(hl)
0122+  CC66 77          	ld	(hl),a
0123+  CC67 23          	inc	hl
0124+  CC68 7B          	ld	a,e
0125+  CC69 B6          	or	(hl)
0126+  CC6A 77          	ld	(hl),a
0127+  CC6B 04          	inc	b
0128+  CC6C FD 23       	inc	iy
0129+  CC6E DD 25       	dec	xh
0130+  CC70 20 C6       	jr	nz,xy8dd
0131+  CC72 CD 93 CC    	call T51_COLOR
0132+  CC75 DD 21 A7 CC xyend	ld	ix,flag0
0133+  CC79 DD 7E 04    	ld	a,(ix+#04)
0134+  CC7C C6 05       	add	a,5
0135+  CC7E DD 77 04    	ld	(ix+#04),a
0136+  CC81 FE FD       	cp	256-3
0137+  CC83 38 0C       	jr	c,xystop
0138+  CC85 DD 36 04 02 	ld	(ix+#04),2
0139+  CC89 DD 7E 05    	ld	a,(ix+#05)
0140+  CC8C C6 07       	add	a,7
0141+  CC8E DD 77 05    	ld	(ix+#05),a
0142+  CC91 D9          xystop	exx
0143+  CC92 C9          	ret
0144+  CC93             
0145+  CC93             T51_COLOR
0146+  CC93 3A 20 CC    				ld a,(T42_ATT)
0147+  CC96 B7          				or a
0148+  CC97 C8          				ret z
0149+  CC98             ; pokud je nula, tak se neobarvuje
0150+  CC98             ;				dec h
0151+  CC98 2D          				dec l
0152+  CC99             
0153+  CC99 7C          				ld a,h
0154+  CC9A 0F          				rrca
0155+  CC9B 0F          				rrca
0156+  CC9C 0F          				rrca
0157+  CC9D E6 03       				and 3
0158+  CC9F F6 58       				or 88
0159+  CCA1 67          				ld h,a
0160+  CCA2 3A 20 CC    				ld a,(T42_ATT)
0161+  CCA5 77          				ld (hl),a
0162+  CCA6 C9          				ret
0163+  CCA7             ;systemove premenne:(pre disu)
0164+  CCA7             
0165+  CCA7 00          flag0	db	#00
0166+  CCA8 00          flag1	db	#00
0167+  CCA9 00          flag2	db	#00
0168+  CCAA 00          inp	db	#00
0169+  CCAB             
0170+  CCAB             cursor
0171+  CCAB 00          xxx	db	#00
0172+  CCAC 00          yyy	db	#00
0173+  CCAD 00 00       leni	dw	0
0174+  CCAF 00 00       adr	dw	0
0175+  CCB1             
0176+  CCB1             znaky
0177+  CCB1              INCBIN zx51.ch6
0178+  D4B1             
0179+  D4B1             	ENDMODULE
1244   D4B1             	INCLUDE "txy32.a80"
0001+  D4B1             //LMN128-Jan Kucera-Zlin/CZ
0002+  D4B1             //added OR Flag
0003+  D4B1             //Original by BusySoft
0004+  D4B1             	MODULE txy32
0005+  D4B1 7E          txy	 	 ld   a,(hl)
0006+  D4B2 E6 7F                and  127
0007+  D4B4             /*         cp   13
0008+  D4B4                      jr   z,T42_ZMEN */
0009+  D4B4 FE 10                cp   16
0010+  D4B6 28 0B                jr	  z,colorchange
0011+  D4B8 E5                   push hl
0012+  D4B9 CD CB D4             call xy
0013+  D4BC E1                   pop  hl
0014+  D4BD             /*         ld   a,(T42_BORE)
0015+  D4BD~                     dec  a
0016+  D4BD~                     cp   c
0017+  D4BD~                     jr   c,T42_ZMEN
0018+  D4BD                      inc  c */
0019+  D4BD 7E          T32_BACK ld   a,(hl)
0020+  D4BE 17                   rla
0021+  D4BF D8                   ret  c
0022+  D4C0 23                   inc  hl
0023+  D4C1 18 EE                jr   txy
0024+  D4C3             
0025+  D4C3             colorchange
0026+  D4C3 23          			inc hl
0027+  D4C4 7E          			ld a,(hl)
0028+  D4C5 32 CA D4    			ld (T32_ATT),a
0029+  D4C8 18 F3       			jr T32_BACK	
0030+  D4CA 00          T32_ATT		defb 0	
0031+  D4CB             
0032+  D4CB A7          xy	and	a
0033+  D4CC C8          	ret	z
0034+  D4CD D9          	exx
0035+  D4CE ED 4B 77 D5 	ld	bc,(cursor)
0036+  D4D2 11 B1 CC    xy8	ld	de,boot.txy51.znaky
0037+  D4D5 26 00       	ld	h,#00
0038+  D4D7 6F          	ld	l,a
0039+  D4D8 29          	add	hl,hl
0040+  D4D9 29          	add	hl,hl
0041+  D4DA 29          	add	hl,hl
0042+  D4DB 19          	add	hl,de
0043+  D4DC E5          	push hl
0044+  D4DD FD E1       	pop	iy
0045+  D4DF DD 26 08    	ld	xh,#08
0046+  D4E2 78          xy8dd	ld	a,b
0047+  D4E3 FE C0       	cp	#c0
0048+  D4E5 30 48       	jr	nc,xyend
0049+  D4E7             ;	call	#22b1
0050+  D4E7             
0051+  D4E7 A7          	and a
0052+  D4E8 1F          	rra
0053+  D4E9 37          	scf
0054+  D4EA 1F          	rra
0055+  D4EB A7          	and a
0056+  D4EC 1F          	rra
0057+  D4ED A8          	xor b
0058+  D4EE E6 F8       	and 248
0059+  D4F0 A8          	xor b
0060+  D4F1 67          	ld h,a
0061+  D4F2 79          	ld a,c
0062+  D4F3 07          	rlca
0063+  D4F4 07          	rlca
0064+  D4F5 07          	rlca
0065+  D4F6 A8          	xor b
0066+  D4F7 E6 C7       	and 199
0067+  D4F9 A8          	xor b
0068+  D4FA 07          	rlca
0069+  D4FB 07          	rlca
0070+  D4FC 6F          	ld l,a
0071+  D4FD 79          	ld a,c
0072+  D4FE E6 07       	and 07
0073+  D500             
0074+  D500 FD 56 00    	ld	d,(iy+#00)
0075+  D503             //	ld	e,#00
0076+  D503 28 48       	jr	z,xy8bbnew 		//kulata pozice, staci vypsat jen jeden atribut
0077+  D505 1E 00       	ld e,0
0078+  D507 CB 1A       xy8cc rr	d
0079+  D509 CB 1B       	rr	e
0080+  D50B 3D          	dec	a
0081+  D50C 20 F9       	jr	nz,xy8cc   
0082+  D50E             xy8bb
0083+  D50E 3A 7D D5    	ld a,(orflag)
0084+  D511 A7          	and a
0085+  D512 7A          	ld a,d
0086+  D513 20 01       	jr nz,1F
0087+  D515 B6          	or	(hl)
0088+  D516 77          1	ld	(hl),a
0089+  D517 CD 5C D5        call T32_COLOR
0090+  D51A 23          	inc	hl
0091+  D51B 3A 7D D5    	ld a,(orflag)
0092+  D51E A7          	and a
0093+  D51F 7B          	ld a,e
0094+  D520 20 01       	jr nz,2F
0095+  D522 B6          	or	(hl)				
0096+  D523 77          2	ld	(hl),a
0097+  D524 CD 5C D5        call T32_COLOR
0098+  D527 04          3	inc	b
0099+  D528 FD 23       	inc	iy
0100+  D52A DD 25       	dec	xh
0101+  D52C             //    call T32_COLOR
0102+  D52C C2 E2 D4    	jp	nz,xy8dd
0103+  D52F             //	call T32_COLOR
0104+  D52F DD 21 73 D5 xyend	ld	ix,flag0
0105+  D533 DD 7E 04    	ld	a,(ix+#04)
0106+  D536 C6 08       	add	a,8
0107+  D538 DD 77 04    	ld	(ix+#04),a
0108+  D53B FE F9       	cp	256-7
0109+  D53D 38 0C       	jr	c,xystop
0110+  D53F DD 36 04 02 	ld	(ix+#04),2
0111+  D543 DD 7E 05    	ld	a,(ix+#05)
0112+  D546 C6 08       	add	a,8
0113+  D548 DD 77 05    	ld	(ix+#05),a
0114+  D54B D9          xystop	exx
0115+  D54C C9          	ret
0116+  D54D             xy8bbnew
0117+  D54D 3A 7D D5    	ld a,(orflag)
0118+  D550 A7          	and a
0119+  D551 7A          	ld a,d
0120+  D552 20 01       	jr nz,4F
0121+  D554 B6          	or (hl)
0122+  D555 77          4	ld (hl),a
0123+  D556 CD 5C D5        call T32_COLOR
0124+  D559 23          	inc hl
0125+  D55A 18 CB       	jr 3B
0126+  D55C             	
0127+  D55C F5          T32_COLOR		push af
0128+  D55D 3A CA D4    				ld a,(T32_ATT)
0129+  D560 B7          				or a
0130+  D561 C8          				ret z
0131+  D562 E5          				push hl
0132+  D563             ; pokud je nula, tak se neobarvuje
0133+  D563             
0134+  D563             //				inc h
0135+  D563             //				inc l
0136+  D563             
0137+  D563 7C          				ld a,h
0138+  D564 0F          				rrca
0139+  D565 0F          				rrca
0140+  D566 0F          				rrca
0141+  D567 E6 03       				and 3
0142+  D569 F6 58       				or 88
0143+  D56B 67          				ld h,a
0144+  D56C 3A CA D4    				ld a,(T32_ATT)
0145+  D56F 77          				ld (hl),a
0146+  D570 E1          				pop hl
0147+  D571 F1          				pop af
0148+  D572 C9          				ret
0149+  D573             ;systemove premenne:(pre disu)
0150+  D573             
0151+  D573 00          flag0	db	#00
0152+  D574 00          flag1	db	#00
0153+  D575 00          flag2	db	#00
0154+  D576 00          inp	db	#00
0155+  D577             
0156+  D577             cursor
0157+  D577 00          xxx	db	#00
0158+  D578 00          yyy	db	#00
0159+  D579 00 00       leni	dw	0
0160+  D57B 00 00       adr	dw	0
0161+  D57D             
0162+  D57D             
0163+  D57D 01          orflag  db  #01
0164+  D57E             //znaky
0165+  D57E             // INCBIN zx51.ch6
0166+  D57E             
0167+  D57E             	ENDMODULE
1245   D57E             	INCLUDE "sprite2.a80"
0001+  D57E             ; zobrazi sprite dle cisla v A pozice a data spritu jsou v tabulce na adrese HL; priklad nakonci!!!
0002+  D57E             ; nebo DE-pozice, HL-adresa (rutina OK)
0003+  D57E             ; zobrazuje sprites z programu SpriteEdit typ 2
0004+  D57E             	module sprite2
0005+  D57E             SP_      
0006+  D57E             ;        ld   hl,SP_TAB
0007+  D57E 87                   add  a,a
0008+  D57F 87                   add  a,a
0009+  D580 16 00                ld   d,0
0010+  D582 5F                   ld   e,a
0011+  D583 19                   add  hl,de
0012+  D584 5E                   ld   e,(hl)
0013+  D585 23                   inc  hl
0014+  D586 56                   ld   d,(hl)
0015+  D587 23                   inc  hl
0016+  D588 D5             			 push de
0017+  D589 5E                   ld   e,(hl)
0018+  D58A 23                   inc  hl
0019+  D58B 56                   ld   d,(hl)
0020+  D58C EB                   ex   de,hl
0021+  D58D D1                   pop de
0022+  D58E                      
0023+  D58E             
0024+  D58E             ;------------------------------
0025+  D58E             OK       
0026+  D58E 46                    ld b,(hl)
0027+  D58F 23          					inc hl
0028+  D590 4E                    ld c,(hl)
0029+  D591 23                    inc hl
0030+  D592 7A                   ld   a,d
0031+  D593 0F                   rrca
0032+  D594 0F                   rrca
0033+  D595 0F                   rrca
0034+  D596 E6 E0                and  %11100000
0035+  D598 83                   add  a,e
0036+  D599 5F                   ld   e,a
0037+  D59A 7A                   ld   a,d
0038+  D59B E6 18                and  24
0039+  D59D F6 40                or   64
0040+  D59F 57                   ld   d,a
0041+  D5A0             
0042+  D5A0 D5          OK_SEM   push de
0043+  D5A1 C5                   push bc
0044+  D5A2 7A                   ld   a,d
0045+  D5A3 0F                   rrca
0046+  D5A4 0F                   rrca
0047+  D5A5 0F                   rrca
0048+  D5A6 E6 03                and  3
0049+  D5A8 F6 58                or   88
0050+  D5AA 57                   ld   d,a
0051+  D5AB             
0052+  D5AB             OK_RADE1 ;call DE_BAJT
0053+  D5AB 7E                    ld a,(hl)
0054+  D5AC 23                    inc hl
0055+  D5AD             
0056+  D5AD 12                   ld   (de),a
0057+  D5AE 1C                   inc  e
0058+  D5AF 0D                   dec  c
0059+  D5B0 20 F9                jr   nz,OK_RADE1
0060+  D5B2 C1                   pop  bc
0061+  D5B3 D1                   pop  de
0062+  D5B4             
0063+  D5B4 D5          OK_DALSI push de
0064+  D5B5 C5                   push bc
0065+  D5B6             OK_RADEK ;call DE_BAJT
0066+  D5B6 7E                    ld a,(hl)
0067+  D5B7 23                    inc hl
0068+  D5B8             
0069+  D5B8 12                   ld   (de),a
0070+  D5B9 1C                   inc  e
0071+  D5BA 0D                   dec  c
0072+  D5BB 20 F9                jr   nz,OK_RADEK
0073+  D5BD C1                   pop  bc
0074+  D5BE D1                   pop  de
0075+  D5BF 14                   inc  d
0076+  D5C0 7A                   ld   a,d
0077+  D5C1 E6 07                and  7
0078+  D5C3 20 EF                jr   nz,OK_DALSI
0079+  D5C5 3E 20                ld   a,32
0080+  D5C7 83                   add  a,e
0081+  D5C8 5F                   ld   e,a
0082+  D5C9 3F                   ccf
0083+  D5CA 9F                   sbc  a,a
0084+  D5CB E6 F8                and  -8
0085+  D5CD 82                   add  a,d
0086+  D5CE 57                   ld   d,a
0087+  D5CF 10 CF                djnz OK_SEM
0088+  D5D1 C9                   ret
0089+  D5D2             
0090+  D5D2             /*
0091+  D5D2~            SP_TAB   defw #0B00  ;kam zobrazit
0092+  D5D2~                     defw 32768 ;odkud
0093+  D5D2~            
0094+  D5D2~            
0095+  D5D2             */
0096+  D5D2             	endmodule
1246   D5D2             	INCLUDE "xdec_06.a80"
0001+  D5D2             //Original by BusySoft
0002+  D5D2             	MODULE xdec_06
0003+  D5D2             ;Prevod bin->dec bez znamienka
0004+  D5D2             ; in: bin
0005+  D5D2             ;out: dec
0006+  D5D2             z 
0007+  D5D2 21 84 D6    bindec      ld   hl,zzdec            ;Vynulovanie buffera dec
0008+  D5D5 01 00 0A                ld   bc,lldec*#0100
0009+  D5D8 71          cls1        ld   (hl),c
0010+  D5D9 23                      inc  hl
0011+  D5DA 10 FC                   djnz cls1
0012+  D5DC 0E 20                   ld   c,8*llbin           ;Opakuj pre kazdy bit bin:
0013+  D5DE CD 45 D6    bndc0       call binx2               ;vyrotovanie bitu z bin
0014+  D5E1 21 8E D6                ld   hl,eedec
0015+  D5E4 06 0A                   ld   b,lldec             ;a zarotovanie toho bitu do dec
0016+  D5E6 2B          bndc2       dec  hl
0017+  D5E7 7E                      ld   a,(hl)
0018+  D5E8 8F                      adc  a,a
0019+  D5E9 FE 0A                   cp   #0a
0020+  D5EB 38 02                   jr   c,bndc3
0021+  D5ED D6 0A                   sub  #0a
0022+  D5EF 77          bndc3       ld   (hl),a
0023+  D5F0 3F                      ccf
0024+  D5F1 10 F3                   djnz bndc2
0025+  D5F3 0D                      dec  c
0026+  D5F4 20 E8                   jr   nz,bndc0
0027+  D5F6 C9                      ret
0028+  D5F7             
0029+  D5F7             ;Prevod dec->bin bez znamienka
0030+  D5F7             ; in: dec
0031+  D5F7             ;out: bin
0032+  D5F7              
0033+  D5F7 21 7F D6    decbin      ld   hl,zzbin           ; Vynulovanie bin
0034+  D5FA 01 00 04                ld   bc,llbin*#0100
0035+  D5FD 71          cls2        ld   (hl),c
0036+  D5FE 23                      inc  hl
0037+  D5FF 10 FC                   djnz cls2                ;Vynasobenie bin desiatimi,
0038+  D601 DD 21 84 D6             ld   ix,zzdec            ;a to takto:
0039+  D605 0E 0A                   ld   c,lldec             ;Najprv to vynasobime dvomi
0040+  D607 CD 45 D6    dcbn0       call binx2
0041+  D60A 21 7F D6                ld   hl,zzbin
0042+  D60D 11 8E D6                ld   de,zzbuf            ;Potom to presunieme
0043+  D610 06 04                   ld   b,llbin             ;do pomocneho buffera
0044+  D612 7E          dcbn1       ld   a,(hl)
0045+  D613 12                      ld   (de),a
0046+  D614 23                      inc  hl
0047+  D615 13                      inc  de
0048+  D616 10 FA                   djnz dcbn1
0049+  D618 CD 45 D6                call binx2               ;Vynasobime styrmi
0050+  D61B CD 45 D6                call binx2               ;(cize dva krat dvomi)
0051+  D61E 21 7F D6                ld   hl,zzbin
0052+  D621 11 8E D6                ld   de,zzbuf
0053+  D624 06 04                   ld   b,llbin             ;A potom k tomu pripocitame
0054+  D626 AF                      xor  a                   ;to z pomocneho buffera
0055+  D627 1A          dcbn2       ld   a,(de)
0056+  D628 8E                      adc  a,(hl)
0057+  D629 77                      ld   (hl),a
0058+  D62A 13                      inc  de
0059+  D62B 23                      inc  hl
0060+  D62C 10 F9                   djnz dcbn2               ;A je to.
0061+  D62E 21 7F D6                ld   hl,zzbin
0062+  D631 06 03                   ld   b,llbin-1           ;Este pripocitame
0063+  D633 DD 7E 00                ld   a,(ix+#00)          ;jednu cislicu z dec
0064+  D636 86                      add  a,(hl)
0065+  D637 77                      ld   (hl),a
0066+  D638 23          dcbn3       inc  hl
0067+  D639 3E 00                   ld   a,#00
0068+  D63B 8E                      adc  a,(hl)
0069+  D63C 77                      ld   (hl),a
0070+  D63D 10 F9                   djnz dcbn3
0071+  D63F DD 23                   inc  ix
0072+  D641 0D                      dec  c                   ;a opakujeme pre
0073+  D642 20 C3                   jr   nz,dcbn0            ;kazdu cislicu z dec
0074+  D644 C9                      ret
0075+  D645              
0076+  D645             ;Nejake podprogramy
0077+  D645              
0078+  D645 21 7F D6    binx2       ld   hl,zzbin            ;Nasobenie bin dvomi
0079+  D648 06 04                   ld   b,llbin
0080+  D64A AF                      xor  a
0081+  D64B CB 16       bnxx2       rl   (hl)
0082+  D64D 23                      inc  hl
0083+  D64E 10 FB                   djnz bnxx2
0084+  D650 C9                      ret
0085+  D651             
0086+  D651 21 7F D6    binneg      ld   hl,zzbin            ;Negacia bin
0087+  D654 06 04                   ld   b,llbin
0088+  D656 37                      scf
0089+  D657 7E          bnngx       ld   a,(hl)
0090+  D658 2F                      cpl
0091+  D659 CE 00                   adc  a,#00
0092+  D65B 77                      ld   (hl),a
0093+  D65C 23                      inc  hl
0094+  D65D 10 F8                   djnz bnngx
0095+  D65F C9                      ret
0096+  D660              
0097+  D660             ;Prevod bin-dec so znamienkom
0098+  D660             ; in: bin v doplnkovom formate
0099+  D660             ;out: dec + znamienko
0100+  D660              
0101+  D660 3A 82 D6    zbndec      ld   a,(eebin-1)
0102+  D663 CB 7F                   bit  7,a                 ;znamienkovy bit
0103+  D665 3E 2B                   ld   a,'+'
0104+  D667 28 05                   jr   z,zbn1
0105+  D669 CD 51 D6                call binneg
0106+  D66C 3E 2D                   ld   a,'-'
0107+  D66E 32 83 D6    zbn1        ld   (sign),a            ;zapis znamienka
0108+  D671 C3 D2 D5                jp   bindec
0109+  D674              
0110+  D674             ;Prevod dec->bin so znamienkom
0111+  D674             ; in: dec + znamienko
0112+  D674             ;out: bin v doplnkovom formate
0113+  D674              
0114+  D674 CD F7 D5    zdcbin      call decbin
0115+  D677 3A 83 D6                ld   a,(sign)
0116+  D67A FE 2D                   cp   '-'                 ;Ak to nie minus,
0117+  D67C C0                      ret  nz                  ;tak nic
0118+  D67D 18 D2                   jr   binneg              ;ak je minus, tak negacia
0119+  D67F              
0120+  D67F             k
0121+  D67F             l      =    k-z
0122+  D67F             ;       org  #6000
0123+  D67F              
0124+  D67F             ;Buffery systemu - pre ulozenie vstupov a vystupov rutiniek
0125+  D67F              
0126+  D67F             ;BIN ... binarna hodnota cisla
0127+  D67F             ;        najprv ide nizsi bajt
0128+  D67F             ;        a po nom vyssie bajty
0129+  D67F              
0130+  D67F FF FF FF FF zzbin  db   #ff,#ff,#ff,#ff
0131+  D683             eebin
0132+  D683             llbin  =    eebin-zzbin
0133+  D683              
0134+  D683             ;DEC ... postupnost desiatkovych cislic
0135+  D683             ;        najprv idu najvyssie rady
0136+  D683             ;        a po nich nizsie desiatkove rady
0137+  D683             ; Dlzka buffera musi byt taka aby sa do nej mestilo cislo z bin
0138+  D683             ; V pripade prevodov so znamienkom sa pouziva aj znamienko
0139+  D683              
0140+  D683 2B          sign   db   '+'
0141+  D684 0000000000  zzdec  db   0,0,0,0,0
0142+  D689              
0143+  D689 0605050305         db   6,5,5,3,5
0144+  D68E              
0145+  D68E             eedec
0146+  D68E             lldec  =    eedec-zzdec
0147+  D68E              
0148+  D68E             ;Pomocny buffer pouzity pre nasobenie desiatimi,
0149+  D68E             ;struktura dat taka ista ako BIN
0150+  D68E              
0151+  D68E 55 55 55 55 zzbuf  db   #55,#55,#55,#55
0152+  D692             eebuf
0153+  D692             	ENDMODULE
1247   D692             	INCLUDE "cf.a80"
0001+  D692               MODULE cf
0002+  D692             // output
0003+  D692             // A - error number  - Z - OK
0004+  D692             // HL - text of error
0005+  D692             // IX	- 512 bytes of indentify data; examples below
0006+  D692             
0007+  D692 DD 21 A8 D7 IDENT    ld   ix,BUFFER
0008+  D696 AF                   xor a              //only master
0009+  D697             ;         ld   a,%00000000
0010+  D697 CD 20 D7             call IDENTIFY       
0011+  D69A             
0012+  D69A 21 12 D7             ld   hl,TEXT16
0013+  D69D F5                   push af			
0014+  D69E 28 22                jr   z,TISKSTATUS1 ; OK
0015+  D6A0 21 C4 D6             ld   hl,TEXT11
0016+  D6A3 FE FF                cp   255
0017+  D6A5 CA C2 D6             jp   z,TISKSTATUS1
0018+  D6A8 21 F2 D6             ld   hl,TEXT14
0019+  D6AB FE 06                cp   6
0020+  D6AD CA C2 D6             jp   z,TISKSTATUS1
0021+  D6B0 21 E6 D6             ld   hl,TEXT13
0022+  D6B3 FE 03                cp   3
0023+  D6B5 CA C2 D6             jp   z,TISKSTATUS1
0024+  D6B8 21 D4 D6             ld   hl,TEXT12
0025+  D6BB 3D                   dec  a
0026+  D6BC CA C2 D6             jp   z,TISKSTATUS1
0027+  D6BF 21 04 D7             ld   hl,TEXT15         
0028+  D6C2 F1          TISKSTATUS1  pop  af
0029+  D6C3                    
0030+  D6C3             // A - error number
0031+  D6C3             // HL - text of error				
0032+  D6C3             /* examples
0033+  D6C3~            MASTERINFO
0034+  D6C3~                     ld   hl,TEXT4
0035+  D6C3~                     ld   bc,#0602
0036+  D6C3~                     call T42_TEXT
0037+  D6C3~                     ld   hl,TEXT5
0038+  D6C3~                     ld   bc,#0702
0039+  D6C3~                     call T42_TEXT
0040+  D6C3~                     ld   hl,TEXT6
0041+  D6C3~                     ld   bc,#0802
0042+  D6C3~                     call T42_TEXT
0043+  D6C3~                     ld   hl,TEXT7
0044+  D6C3~                     ld   bc,#0902
0045+  D6C3~                     call T42_TEXT
0046+  D6C3~                     ld   hl,TEXT101
0047+  D6C3~                     ld   bc,#0A02
0048+  D6C3~                     call T42_TEXT
0049+  D6C3~                     ld   hl,TEXT102
0050+  D6C3~                     ld   bc,#0A15
0051+  D6C3~                     call T42_TEXT
0052+  D6C3~            
0053+  D6C3~            ;model
0054+  D6C3~                     ld   hl,BUFFER+54
0055+  D6C3~                     ld   b,40
0056+  D6C3~                     call PROHOD
0057+  D6C3~                     set  7,(ix+84)
0058+  D6C3~            
0059+  D6C3~                     ld   bc,#0609
0060+  D6C3~                     call T42_TEXT
0061+  D6C3~            
0062+  D6C3~            ;firmware
0063+  D6C3~                     ld   hl,BUFFER+46
0064+  D6C3~                     ld   b,8
0065+  D6C3~                     call PROHOD
0066+  D6C3~                     set  7,(ix+53)
0067+  D6C3~            
0068+  D6C3~                     ld   bc,#070C
0069+  D6C3~                     call T42_TEXT
0070+  D6C3~            
0071+  D6C3~            ;serial number
0072+  D6C3~            
0073+  D6C3~                     ld   hl,BUFFER+20
0074+  D6C3~                     ld   b,20
0075+  D6C3~                     call PROHOD
0076+  D6C3~                     set  7,(ix+39)
0077+  D6C3~            
0078+  D6C3~                     ld   bc,#0811
0079+  D6C3~                     call T42_TEXT
0080+  D6C3~                     
0081+  D6C3~            
0082+  D6C3~                     
0083+  D6C3~            ;LBA
0084+  D6C3~                     ld   hl,TEXT_NO
0085+  D6C3~                     bit  1,(ix+99)
0086+  D6C3~                     jr   z,L1
0087+  D6C3~            
0088+  D6C3~                     ld   hl,TEXT_YES
0089+  D6C3~            L1       ld   bc,#090D
0090+  D6C3~                     call T42_TEXT
0091+  D6C3~            
0092+  D6C3~            ;DMA
0093+  D6C3~                     ld   hl,TEXT_NO
0094+  D6C3~                     bit  0,(ix+99)
0095+  D6C3~                     jr   z,L2
0096+  D6C3~            
0097+  D6C3~                     ld   hl,TEXT_YES
0098+  D6C3~            L2       ld   bc,#0925
0099+  D6C3~                     call T42_TEXT
0100+  D6C3~            
0101+  D6C3~            ;CHS
0102+  D6C3~            ;Cylinders
0103+  D6C3~            				 ld l,(ix+2)
0104+  D6C3~            				 ld h,(ix+3)
0105+  D6C3~                     ld   bc,#0A09
0106+  D6C3~                     call NUMBER4              
0107+  D6C3~            ;Heads         
0108+  D6C3~                     ld l,(ix+6)
0109+  D6C3~            				 ld h,(ix+7)
0110+  D6C3~                     ld   bc,#0A0f
0111+  D6C3~                     call NUMBER1
0112+  D6C3~            ;Sectors         
0113+  D6C3~                     ld l,(ix+12)
0114+  D6C3~            				 ld h,(ix+13)
0115+  D6C3~                     ld   bc,#0A12
0116+  D6C3~                     call NUMBER1
0117+  D6C3~                     
0118+  D6C3~            ;capacity                          
0119+  D6C3~            				 ld l,(ix+12)
0120+  D6C3~            				 ld h,(ix+13)
0121+  D6C3~                     ld e,(ix+6)
0122+  D6C3~            				 ld d,(ix+7)
0123+  D6C3~            				
0124+  D6C3~            				
0125+  D6C3~            				 push ix ; rutina nasob pouziva IX
0126+  D6C3~                     call nasobeniHLDE.nasob
0127+  D6C3~                     pop ix
0128+  D6C3~                     ld e,(ix+2)
0129+  D6C3~            				 ld d,(ix+3)
0130+  D6C3~            				 
0131+  D6C3~            				 push ix
0132+  D6C3~                     call nasobeniHLDE.nasob
0133+  D6C3~            ;vysledek je v IXHL
0134+  D6C3~            
0135+  D6C3~            				 ld l,h
0136+  D6C3~            				 ld a,xl
0137+  D6C3~            				 ld h,a
0138+  D6C3~            				 ld e,hx
0139+  D6C3~            
0140+  D6C3~            ;delime 256 vysledek EHL
0141+  D6C3~                     ld b,3
0142+  D6C3~            trikrat1 
0143+  D6C3~                     srl e
0144+  D6C3~                     rr h
0145+  D6C3~                     rr l
0146+  D6C3~                     djnz trikrat1				 
0147+  D6C3~            ;delime tremi
0148+  D6C3~                     ld   bc,#0A1F         
0149+  D6C3~                     call NUMBER4
0150+  D6C3~                     
0151+  D6C3~                     pop ix
0152+  D6C3~                     
0153+  D6C3~                     
0154+  D6C3~            ;LBA 48Bits
0155+  D6C3~            
0156+  D6C3~                     inc  hx
0157+  D6C3~            
0158+  D6C3~                     ld   hl,TEXT_NO
0159+  D6C3~                     bit  2,(ix-83)
0160+  D6C3~                     jr   z,L3
0161+  D6C3~            
0162+  D6C3~                     ld   hl,TEXT_YES
0163+  D6C3~            L3       ld   bc,#091C
0164+  D6C3~                     call T42_TEXT
0165+  D6C3~            
0166+  D6C3~            Endinentify
0167+  D6C3             */				
0168+  D6C3 C9                   ret
0169+  D6C4             ; navrat  
0170+  D6C4             ;------------------------------
0171+  D6C4             TEXT11   dc 16,7,"disk time out "
0171+  D6C4 10076469736B2074696D65206F7574A0
0172+  D6D4             TEXT12   dc 16,7,"status b0 error "
0172+  D6D4 1007737461747573206230206572726F72A0
0173+  D6E6             TEXT13   dc 16,7,"DRQ error "
0173+  D6E6 1007445251206572726F72A0
0174+  D6F2             TEXT14   dc 16,7,"drive not ready "
0174+  D6F2 10076472697665206E6F74207265616479A0
0175+  D704             TEXT15   dc 16,7,"other error "
0175+  D704 10076F74686572206572726F72A0
0176+  D712 10074F4B20  TEXT16   db 16,7,"OK "
0177+  D717 10075965F3  TEXT_YES dc 16,7,"Yes"
0178+  D71C 10 07 4E EF TEXT_NO  dc 16,7,"No"
0179+  D720             
0180+  D720             /*
0181+  D720~            ;------------------------------
0182+  D720~            ;TISK CISLA BC-POZICE HL-HODNOT
0183+  D720~            ;TISKNE CISLO TYPU INTEGER
0184+  D720~            ;STAR-RUTINA TISKU 1 ZNAKU NA
0185+  D720~            ;POZICI BC (0,0)
0186+  D720~            NUMBER4  ld   de,-10000
0187+  D720~                     call NUM_JED
0188+  D720~            NUMBER3  ld   de,-1000
0189+  D720~                     call NUM_JED
0190+  D720~            NUMBER2  ld   de,-100
0191+  D720~                     call NUM_JED
0192+  D720~            NUMBER1  ld   de,-10
0193+  D720~                     call NUM_JED
0194+  D720~            NUMBER0  ld   a,l
0195+  D720~                     add  a,48
0196+  D720~                     jp   T42
0197+  D720~            
0198+  D720~            NUM_JED  xor  a
0199+  D720~            NUM_JED1 add  hl,de
0200+  D720~                     jr   nc,NUM_PRIC
0201+  D720~                     inc  a
0202+  D720~                     jr   NUM_JED1
0203+  D720~            NUM_PRIC sbc  hl,de
0204+  D720~                     add  a,48
0205+  D720~                     push bc
0206+  D720~                     push hl
0207+  D720~                     call T42
0208+  D720~                     pop  hl
0209+  D720~                     pop  bc
0210+  D720~                     inc  c
0211+  D720~                     ret
0212+  D720             */
0213+  D720             ;------------------------------
0214+  D720             ;IDENTIFY:ix-adresa, a-mas/slv
0215+  D720             IDENTIFY
0216+  D720 F6 E0                or   %11100000
0217+  D722 32 2A D7             ld   (ACCMODE0+1),a
0218+  D725 CD 3C D7             call TST_BSY
0219+  D728 C0                   ret  nz
0220+  D729             
0221+  D729 3E 00       ACCMODE0 ld   a,0
0222+  D72B D3 DB                out  (P_HEA),a
0223+  D72D 3E EC                ld   a,#EC
0224+  D72F D3 BF                out  (P_COM),a
0225+  D731 CD 56 D7             call TST_DR
0226+  D734 C0                   ret  nz
0227+  D735             
0228+  D735 CD 72 D7             call RD_512
0229+  D738             
0230+  D738 CD 3C D7             call TST_BSY
0231+  D73B             ;
0232+  D73B C9                   ret
0233+  D73C             /*
0234+  D73C~            ;fyzicke cteni jednoho LBA sectoru
0235+  D73C~            ;ix=adresa, a=mod adresace bit4=master/slave
0236+  D73C~            ;cedb= 28 bit lba sector;c-sectornumber,e-cylinderlow,d-cylinderhigh,b-head
0237+  D73C~            LBAREAD
0238+  D73C~                     or   %11100000
0239+  D73C~            ;natvrdo LBA  bit6 urcuje, ze se pouzije LBA pristup        
0240+  D73C~                     ld   (HEA_REG+1),a
0241+  D73C~                     call TST_BSY
0242+  D73C~                     ret  nz
0243+  D73C~                     
0244+  D73C~            HEA_REG  ld   a,%11100000
0245+  D73C~            				 or  b
0246+  D73C~            ; prictou se nejvyssi ctyri bity LBA				 
0247+  D73C~                     out  (P_HEA),a
0248+  D73C~            ;cislo hlavicky
0249+  D73C~            
0250+  D73C~                     ld   a,1
0251+  D73C~                     out  (P_HSE),a
0252+  D73C~            ;pocet sektoru 1*512B
0253+  D73C~            
0254+  D73C~                     ld   a,c
0255+  D73C~                     out  (P_NSE),a
0256+  D73C~            ;cislo sektoru od 1
0257+  D73C~            
0258+  D73C~                     ld   a,e
0259+  D73C~                     out  (P_CYL),a
0260+  D73C~                     ld   a,d
0261+  D73C~                     out  (P_CYH),a
0262+  D73C~            ;cislo cylindru
0263+  D73C~            
0264+  D73C~                     ld   a,#20
0265+  D73C~                     out  (P_COM),a
0266+  D73C~            
0267+  D73C~            
0268+  D73C~                     call TST_DR
0269+  D73C~                     ret  nz
0270+  D73C~            
0271+  D73C~                     call RD_512
0272+  D73C~                     call TST_BSY
0273+  D73C~            ;         ret  nz
0274+  D73C~            
0275+  D73C                      ret*/
0276+  D73C             
0277+  D73C             TST_BSY
0278+  D73C E5                   push hl
0279+  D73D 21 00 00             ld   hl,0
0280+  D740             TST1
0281+  D740 2B                   dec  hl
0282+  D741 7D                   ld   a,l
0283+  D742 B4                   or   h
0284+  D743 28 0C                jr   z,TOUT1
0285+  D745 DB BF       P84      in   a,(P_COM)
0286+  D747 FE FF                cp   255
0287+  D749 28 F5                jr   z,TST1
0288+  D74B CB 7F                bit  7,a
0289+  D74D 20 F1                jr   nz,TST1
0290+  D74F E1                   pop  hl
0291+  D750 C9                   ret
0292+  D751             TOUT1
0293+  D751 3E FF                ld   a,255
0294+  D753 B7                   or   a
0295+  D754 E1                   pop  hl
0296+  D755 C9                   ret
0297+  D756             ;------------------------------
0298+  D756             ;test BSY,DRDY,DRQ,ERR statusu
0299+  D756             TST_DR
0300+  D756 CD 3C D7             call TST_BSY
0301+  D759 C0                   ret  nz
0302+  D75A CB 77                bit  6,a
0303+  D75C 28 09                jr   z,ER6
0304+  D75E CB 5F                bit  3,a
0305+  D760 28 09                jr   z,ER3
0306+  D762 CB 47                bit  0,a
0307+  D764 20 09                jr   nz,ER1
0308+  D766 C9                   ret
0309+  D767 3E 07       ER6      ld   a,7
0310+  D769 3D                   dec  a
0311+  D76A C9                   ret
0312+  D76B 3E 04       ER3      ld   a,4
0313+  D76D 3D                   dec  a
0314+  D76E C9                   ret
0315+  D76F 3E 01       ER1      ld   a,1
0316+  D771 C9                   ret
0317+  D772             ;------------------------------
0318+  D772             RD_512
0319+  D772 DD 22 92 D7          ld   (DMADR1),ix
0320+  D776 E5                   push hl
0321+  D777 21 89 D7             ld   hl,RD1S
0322+  D77A 01 0B 0E             ld   bc,RD1L*256+DMA
0323+  D77D ED B3       RDWR1    otir
0324+  D77F 06 87                ld   b,#87				;WR6 enable dma
0325+  D781 ED 41                out  (c),b
0326+  D783 E1                   pop  hl
0327+  D784 01 00 02             ld   bc,512
0328+  D787 09                   add  hl,bc
0329+  D788 C9                   ret
0330+  D789             ;---<DMA_IN>-------------------
0331+  D789             RD1S
0332+  D789 C3                   defb 195				;WR6 #C3 reset
0333+  D78A 7D                   defb %01111101			;WR0 A->B, transfer
0334+  D78B C3 00                defw P_DAT				;source port
0335+  D78D FF 01                defw 511				;lenght
0336+  D78F 2C                   defb %00101100			;WR1 A-port,A-fixed
0337+  D790 10                   defb %00010000			;WR2 B-memory, B-increment
0338+  D791 AD                   defb %10101101			;WR4 continuous,
0339+  D792 00 00       DMADR1   defw 0					;destination
0340+  D794 92                   defb %10010010			;WR5 ready low,CE/WAIT,stop on end of block
0341+  D795 CF                   defb #CF				;WR6 load
0342+  D796 B3                   defb #B3				;WR6 force ready
0343+  D797             RD1L     equ  $-RD1S
0344+  D797             
0345+  D797             ;------------------------------
0346+  D797             ;prohazuje vyssi a nizsi byte
0347+  D797             ;zkurveny system
0348+  D797             PROHOD
0349+  D797             ;HL adresa
0350+  D797             ;B kolik bytu
0351+  D797             ;MENI: A
0352+  D797 E5                   push hl
0353+  D798 C5                   push bc
0354+  D799 CB 08                rrc  b
0355+  D79B             PROHOD1
0356+  D79B 7E                   ld   a,(hl)
0357+  D79C 23                   inc  hl
0358+  D79D 4E                   ld   c,(hl)
0359+  D79E 2B                   dec  hl
0360+  D79F 71                   ld   (hl),c
0361+  D7A0 23                   inc  hl
0362+  D7A1 77                   ld   (hl),a
0363+  D7A2 23                   inc  hl
0364+  D7A3 10 F6                djnz PROHOD1
0365+  D7A5 C1                   pop  bc
0366+  D7A6 E1                   pop  hl
0367+  D7A7 C9                   ret
0368+  D7A8             
0369+  D7A8             ;------------------------------
0370+  D7A8             /*D1LBA    defw 0,0,0
0371+  D7A8~            D2LBA    defw 0,0,0
0372+  D7A8             LEN      equ  $-32768*/
0373+  D7A8             BUFFER   ;equ  25000
0374+  D7A8 30          					block 512,48
0375+  D9A8             ;porty HOOD
0376+  D9A8             P_DAT 	equ 195	;8'b110xx011
0377+  D9A8             P_ERR 	equ 167	;8'b101xx111
0378+  D9A8             P_HSE 	equ 203	;8'b110xx011
0379+  D9A8             P_NSE 	equ 175	;8'b101xx111
0380+  D9A8             P_CYL 	equ 211	;8'b110xx011
0381+  D9A8             P_CYH 	equ 183	;8'b101xx111
0382+  D9A8             P_HEA 	equ 219	;8'b110xx011
0383+  D9A8             P_COM 	equ 191 ;8'b101xx111          
0384+  D9A8             DMA     equ  11 
0385+  D9A8             
0386+  D9A8               endmodule
1248   D9A8             MB03pluslogo
1249   D9A8             	INCBIN "MB03+LOGOv2.bin"
1250   E18A             ultimatelogo	
1251   E18A             	INCBIN "ULTIMATE.bin"
1252   E28E             dots	
1253   E28E             //	INCBIN "DOTS.bin"	
1254   E28E             CaroLogo
1255   E28E             	INCBIN "CaroLogo.bin"
1256   E5C3             EsxLogo
1257   E5C3             	INCBIN "ESXLOGO.bin"
1258   EB65             BSDOSLogo
1259   EB65             	INCBIN "BSDOSLOGO.bin"		
1260   F0E3             /*
1261   F0E3~            NewdimLogo
1262   F0E3~            	INCBIN "NewdimLogo.bin"
1263   F0E3~            eightbc_i
1264   F0E3~            	INCBIN "8BC_I.cde"
1265   F0E3~            EasyLogoSmall
1266   F0E3~            	INCBIN "EasyLogoSmall.bin"
1267   F0E3             */	
1268   F0E3             /*easyhdd	
1269   F0E3~            	INCBIN "easyhdd.out"
1270   F0E3             easyhddend*/
1271   F0E3             /*
1272   F0E3~            zvuk
1273   F0E3~            	INCBIN "ZVUK.BIN"
1274   F0E3~            zvukend
1275   F0E3             */
1276   F0E3             
1277   F0E3             /*@SP_TAB
1278   F0E3~            @TAB_sprite1
1279   F0E3~            		 DEFB 10,4
1280   F0E3~                     DEFW CaroLogo
1281   F0E3~                     DEFB 24,20
1282   F0E3~                     DEFW NewdimLogo
1283   F0E3~                     defb 0,21
1284   F0E3~                     defw eightbc_i
1285   F0E3~                     defb 1,2
1286   F0E3~                     defw eightbc_i
1287   F0E3~                     defb 25,2
1288   F0E3~                     defw EasyLogoSmall
1289   F0E3             */		 
1290   F0E3             ; --------------- T E X T---------------------------------------
1291   F0E3             TEXT0 	 	dc 16,69,"LMN128-Jan Kucera-Zlin/CZ"
1291   F0E3 10454C4D4E3132382D4A616E204B75636572612D5A6C696E2F43DA
1292   F0FE             TEXT4 		db 16,71,"1:",16,6,"MB02+(BSDOS308a+EH) ",16,71,"e:",16,6,"bs128Kreset"
1292   F0FE 1047313A10064D4230322B284253444F53333038612B454829201047653A1006
1292   F11E 62733132384B7265736574
1293   F129 A0          			dc " "
1294   F12A             TEXT2	 	db 16,71,"2:",16,6,"DivMMC  ",16,71,"@:",16,6,"DivIDE  "
1294   F12A 1047323A10064469764D4D4320201047403A10064469764944452020
1295   F146 A0          			dc " "
1296   F147             TEXT3    	db 16,71,"3:",16,6,"Ultimate BSDOS & esxDOS ",16,71,"d:",16,7,"Dev+ ",16,71,"t:",16,7,"diag ",16,71,"break:",16,7,"ZXROM  "
1296   F147 1047333A1006556C74696D617465204253444F53202620657378444F53201047
1296   F167 643A10074465762B201047743A100764696167201047627265616B3A10075A58
1296   F187 524F4D2020
1297   F18C A0          			dc " "
1298   F18D             TEXT1    	dc 16,69,"MB03+ Ultimate firmware 1.28"
1298   F18D 10454D4230332B20556C74696D617465206669726D7761726520312E32B8
1299   F1AB             
1300   F1AB 10 42 20 20 STRIPS		db 16,66,32,32
1301   F1AF 10 46 20 20 			db 16,70,32,32
1302   F1B3             			db 16,68,32,32,32,32,32
1302   F1B3 10442020202020
1303   F1BA             			db 16,69,32,32,32,32,32
1303   F1BA 10452020202020
1304   F1C1             			db 16,7,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32+128
1304   F1C1 10072020202020202020202020202020202020A0
1305   F1D5             ;TEXTTEST 	dc 16,6,"0123456789 128 WADHTUTTUU ZX Spectrum 128+2"
1306   F1D5             ;TEXTTEST2 dc 16,6,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwyxz"
1307   F1D5             HW1			db 16,67,"HARDWARE: "
1307   F1D5 104348415244574152453A20
1308   F1E1 1007332EB1  			dc 16,7,"3.1"
1309   F1E6             HW2			db 16,3,"FPGA: "
1309   F1E6 1003465047413A20
1310   F1EE             			dc 16,7,"Xilinx SPARTAN 7 XC7S50/112 MHz"
1310   F1EE 100758696C696E78205350415254414E2037205843375335302F313132204D48
1310   F20E FA
1311   F20F             HW3			db 16,3,"RTC: "
1311   F20F 10035254433A20
1312   F216             			dc 16,7,"Maxim DS3234"
1312   F216 10074D6178696D204453333233B4
1313   F224             HW4			db 16,3,"SRAM: ",16,7,"16MB ",16,3,"FastSRAM: ",16,7,"4MB ",16,3,"FLASH: ",16,7,"2MB  ",16,3,"FRAM: "
1313   F224 10035352414D3A20100731364D42201003466173745352414D3A201007344D42
1313   F244 201003464C4153483A201007324D42202010034652414D3A20
1314   F25D 1007384BC2  			dc 16,7,"8KB"
1315   F262             HW5			db 16,3,"STORAGE: "
1315   F262 100353544F524147453A20
1316   F26D             			dc 16,7,"2x microSD, CF:"
1316   F26D 10073278206D6963726F53442C204346BA
1317   F27E             HW6			db 16,3,"OTHERS: "
1317   F27E 10034F54484552533A20
1318   F288             			dc 16,7,"USB, Wifi ESP8266, Matrix 8x8 LEDs"
1318   F288 10075553422C205769666920455350383236362C204D61747269782038783820
1318   F2A8 4C4544F3
1319   F2AC             
1320   F2AC             CONF1		db 16,67,"CONFIGURATION: "
1320   F2AC 1043434F4E46494755524154494F4E3A20
1321   F2BD 1007322EB3  			dc 16,7,"2.3"
1322   F2C2             CONF2		db 16,3,"3xAY: "
1322   F2C2 1003337841593A20
1323   F2CA             			db 16,7,"ON  ",16,3,"SounDrive: ",16,7,"ON  ",16,3,"SAA1099: ",16,7,"ON  ",16,3,"Gen.Sound:"
1323   F2CA 10074F4E20201003536F756E44726976653A2010074F4E202010035341413130
1323   F2EA 39393A2010074F4E2020100347656E2E536F756E643A
1324   F300 10 07 4F CE 			dc 16,7,"ON"
1325   F304             CONF3		db 16,3,"DMA: "
1325   F304 1003444D413A20
1326   F30B             			db 16,7,"ON  ",16,3,"IDE: ",16,7,"ON  ",16,3,"SD: ",16,7,"ON  ",16,3,"RTC: ",16,7,"ON ",16,3,"Wifi: "
1326   F30B 10074F4E202010034944453A2010074F4E2020100353443A2010074F4E202010
1326   F32B 035254433A2010074F4E201003576966693A20
1327   F33E 10 07 4F CE 			dc 16,7,"ON"
1328   F342             ADVS0		db 16,6,"User level: " 
1328   F342 100655736572206C6576656C3A20
1329   F350 10 07 A0    			dc 16,7," "			
1330   F353             ADVS1		db 16,6,"OnTime: " 
1330   F353 10064F6E54696D653A20
1331   F35D 10 07 A0    			dc 16,7," "
1332   F360             ADVS2		db 16,6,"Nmi:    "
1332   F360 10064E6D693A20202020
1333   F36A 10 07 A0    			dc 16,7," "
1334   F36D             ADVS3		db 16,6,"Reset:  "
1334   F36D 100652657365743A2020
1335   F377 10 07 A0    			dc 16,7," "
1336   F37A             ADVS4		db 16,6,"Extra:  "
1336   F37A 100645787472613A2020
1337   F384 10 07 A0    			dc 16,7," "
1338   F387             ADVS5		db 16,6,"PowerUp:"
1338   F387 1006506F77657255703A
1339   F391 10 07 A0    			dc 16,7," "
1340   F394             LEVEL0		dc 16,7,"Loser"
1340   F394 10074C6F7365F2
1341   F39B             LEVEL1		dc 16,7,"Rookie"
1341   F39B 1007526F6F6B69E5
1342   F3A3             LEVEL2		dc 16,6,"Novice"
1342   F3A3 10064E6F766963E5
1343   F3AB             LEVEL3		dc 16,6,"Beginner"
1343   F3AB 1006426567696E6E65F2
1344   F3B5             LEVEL4		dc 16,5,"Enhanced"
1344   F3B5 1005456E68616E6365E4
1345   F3BF             LEVEL5		dc 16,5,"Geek"
1345   F3BF 1005476565EB
1346   F3C5             LEVEL6		dc 16,5,"Guru"
1346   F3C5 1005477572F5
1347   F3CB             LEVEL7		dc 16,4,"Ultimate"						
1347   F3CB 1004556C74696D6174E5
1348   F3D5             FW1			dc 16,0,"FW:1.28/"
1348   F3D5 100046573A312E3238AF
1349   F3DF             ESX1		dc 16,5,"esxDOS is loading"
1349   F3DF 1005657378444F53206973206C6F6164696EE7
1350   F3F2             BSD1		dc 16,5,"BSDOS+EasyHDD is loading "
1350   F3F2 10054253444F532B45617379484444206973206C6F6164696E67A0
1351   F40D             BSD2		dc 16,5,"EasyHDD is loading "
1351   F40D 100545617379484444206973206C6F6164696E67A0
1352   F422             ULT1		db 16,5,"Brand new ",16,7,"BSDOS ",16,5,"is in progress of development.",32+128
1352   F422 10054272616E64206E65772010074253444F53201005697320696E2070726F67
1352   F442 72657373206F6620646576656C6F706D656E742EA0
1353   F457             ULT2		db 16,6,"BUSY ",16,5,"- famous demos coder and author of BSDOS",32+128
1353   F457 1006425553592010052D2066616D6F75732064656D6F7320636F64657220616E
1353   F477 6420617574686F72206F66204253444F53A0
1354   F489             ULT3		dc 16,5,"for MB02+ will bring new version soon."
1354   F489 1005666F72204D4230322B2077696C6C206272696E67206E6577207665727369
1354   F4A9 6F6E20736F6F6EAE
1355   F4B1             ULT4		db 16,6,"Miguel ",16,5,"(Papaya Dezign) is in progress of deve-",32+128
1355   F4B1 10064D696775656C201005285061706179612044657A69676E2920697320696E
1355   F4D1 2070726F6772657373206F6620646576652DA0
1356   F4E4             ULT5		db 16,5,"lopment of new ",16,7,"ESXDOS ",16,5,"ver. 0.9.x for MB03+ !!!",32+128
1356   F4E4 10056C6F706D656E74206F66206E6577201007455358444F532010057665722E
1356   F504 20302E392E7820666F72204D4230332B20212121A0
1357   F519             ULT6		db 16,5,"New one included a lot of new features. LFN e.g.",32+128
1357   F519 10054E6577206F6E6520696E636C756465642061206C6F74206F66206E657720
1357   F539 66656174757265732E204C464E20652E672EA0
1358   F54C             ULT7		dc 16,4,"Due to MB03+ capabilities both system will be "
1358   F54C 100444756520746F204D4230332B206361706162696C697469657320626F7468
1358   F56C 2073797374656D2077696C6C206265A0
1359   F57C             ULT8		dc 16,4,"more flexible and faster."
1359   F57C 10046D6F726520666C657869626C6520616E6420666173746572AE
1360   F597             
1361   F597             //test#3FFD   db 32
1362   F597             
1363   F597 10 00       DATE		db 16,0
1364   F599             	LUA ALLPASS
1365   F599~            	_pc('db	"' .. os.date("%Y%m%d") .. '"') 
1366   F599             db	"20190918"
1366   F599 3230313930393138
1366   F5A1             	ENDLUA
1367   F5A1 A0          	dc " " 
1368   F5A2             		//block 8 // kompenzace delky souboru kvuli os.date
1369   F5A2             endramcode			
1370   F5A2             	
1371   F5A2             	savesna  "boot.sna",ramcode
1372   F5A2             	EMPTYTAP "boot.tap"
1373   F5A2             	SAVETAP  "boot.tap",CODE,"boot",maincode,endramcode-maincode,maincode
1374   F5A2             	ENDMODULE
1375   F5A2             		

Value    Label
------ - -----------------------------------------------------------
0x000B X boot.DMA
0x00FE   boot.ULA
0xC000   boot.maincode
0x0000 X boot.boot
0x0077   boot.endramtest
0x003A   boot.boot2
0x0026   boot.endboot
0x0038 X boot.im1
0x0042   boot.nn1
0x0058   boot.nn2
0x0077   boot.end
0x0073   boot.wait
0x0085   boot.ramcodeinrom
0xC085   boot.ramcode
0xF5A2   boot.endramcode
0xCB1B   boot.cls.CLS
0xCB38   boot.iinkey.IINKEY
0xC26C   boot.skipanim
0xD57D   boot.txy32.orflag
0xD4CA   boot.txy32.T32_ATT
0xC1BD   boot.fall1
0xC1CE   boot.fall2
0xC1DF   boot.fall3
0xC1F0   boot.fall4
0xC178   boot.wide1
0xCBFF   boot.wait.wait
0xC24E   boot.follow1
0xD577   boot.txy32.cursor
0xD4CB   boot.txy32.xy
0xC22B   boot.singledot
0xC201   boot.halfdot
0xC20F   boot.halfdot3
0xC21D   boot.halfdot4
0xE18A   boot.ultimatelogo
0xD58E   boot.sprite2.OK
0xD9A8   boot.MB03pluslogo
0xF1AB   boot.STRIPS
0xD4B1   boot.txy32.txy
0xCA49   boot.draw_jugo.DRAW
0xCCAB   boot.txy51.cursor
0xF0E3   boot.TEXT0
0xCC07   boot.txy51.txy
0xF0FE   boot.TEXT4
0xF147   boot.TEXT3
0xF12A   boot.TEXT2
0xF3D5   boot.FW1
0xF597   boot.DATE
0xF1D5   boot.HW1
0xF1E6   boot.HW2
0xF20F   boot.HW3
0xF224   boot.HW4
0xF262   boot.HW5
0xF27E   boot.HW6
0xF2AC   boot.CONF1
0xF2C2   boot.CONF2
0xF304   boot.CONF3
0xD692   boot.cf.IDENT
0xC37B   boot.cferr
0xD7A8   boot.cf.BUFFER
0xD797   boot.cf.PROHOD
0xC37E   boot.loopkey
0xC8A4   boot.clock
0xC430   boot.next1
0xCA15   boot.clean
0xF422   boot.ULT1
0xF457   boot.ULT2
0xF489   boot.ULT3
0xF4B1   boot.ULT4
0xF4E4   boot.ULT5
0xF519   boot.ULT6
0xF54C   boot.ULT7
0xF57C   boot.ULT8
0xC428   boot.holdkey5
0xEB65   boot.BSDOSLogo
0xF3F2   boot.BSD1
0xC488   boot.holdkey3
0xF40D   boot.BSD2
0xC506   boot.holdkey4
0xE5C3   boot.EsxLogo
0xF3DF   boot.ESX1
0xC5F7   boot.holdkey1
0xC618   boot.div_erase
0xE28E   boot.CaroLogo
0xF342   boot.ADVS0
0xF3CB   boot.LEVEL7
0xC6D7   boot.userlevel
0xF3C5   boot.LEVEL6
0xF3BF   boot.LEVEL5
0xF3B5   boot.LEVEL4
0xF3AB   boot.LEVEL3
0xF3A3   boot.LEVEL2
0xF39B   boot.LEVEL1
0xF394   boot.LEVEL0
0xF353   boot.ADVS1
0xD67F   boot.xdec_06.zzbin
0xD5D2   boot.xdec_06.bindec
0xD684   boot.xdec_06.zzdec
0xCC21   boot.txy51.xy
0xF360   boot.ADVS2
0xF36D   boot.ADVS3
0xF37A   boot.ADVS4
0xF387   boot.ADVS5
0xCB2B   boot.iinkey.ANYKEY
0xC82C   boot.holdkey2
0xC85C   boot.div_erase2
0xC873 X boot.NUMBER4
0xC891   boot.NUM_JED
0xC879 X boot.NUMBER3
0xC87F X boot.NUMBER2
0xC885 X boot.NUMBER1
0xC88B X boot.NUMBER0
0xC892   boot.NUM_JED1
0xC898   boot.NUM_PRIC
0xC9E3   boot.clockbuff
0xC9F9   boot.weekdays
0xC9ED   boot.clockbuff2
0xC9F1   boot.clockbuff3
0xCA68   boot.draw_jugo.LAB
0xCA7C   boot.draw_jugo.N1
0xCA86   boot.draw_jugo.N2
0xCACB   boot.draw_jugo.POX
0xCAEF   boot.draw_jugo.LEVO
0xCA9E   boot.draw_jugo.Y1
0xCAEA   boot.draw_jugo.DESNO
0xCABD   boot.draw_jugo.DIA
0xCB07   boot.draw_jugo.GORE
0xCAAB   boot.draw_jugo.Y2
0xCAF4   boot.draw_jugo.DOLE
0xCAC0   boot.draw_jugo.NAST
0xCAAF   boot.draw_jugo.N3
0xCAB6   boot.draw_jugo.LOOP
0xCAD5   boot.draw_jugo.X1
0xCAE2   boot.draw_jugo.X2
0xCB31   boot.iinkey.ANYKEY_0
0xCB42   boot.iinkey.II1
0xCB46   boot.iinkey.II2
0xCB4C   boot.iinkey.II3
0xCB5B   boot.iinkey.II5
0xCB62   boot.iinkey.II6
0xCB84   boot.iinkey.IINN
0xCB7B   boot.iinkey.II7
0xCBD6   boot.iinkey.IISS
0xCBAD   boot.iinkey.IICS
0xCB7F   boot.iinkey.II8
0xCC19   boot.txy51.colorchange
0xCC13   boot.txy51.T42_BACK
0xCC20   boot.txy51.T42_ATT
0xCC28 X boot.txy51.xy8
0xCCB1   boot.txy51.znaky
0xCC38   boot.txy51.xy8dd
0xCC75   boot.txy51.xyend
0xCC64   boot.txy51.xy8bb
0xCC5D   boot.txy51.xy8cc
0xCC93   boot.txy51.T51_COLOR
0xCCA7   boot.txy51.flag0
0xCC91   boot.txy51.xystop
0xCCA8 X boot.txy51.flag1
0xCCA9 X boot.txy51.flag2
0xCCAA X boot.txy51.inp
0xCCAB X boot.txy51.xxx
0xCCAC X boot.txy51.yyy
0xCCAD X boot.txy51.leni
0xCCAF X boot.txy51.adr
0xD4C3   boot.txy32.colorchange
0xD4BD   boot.txy32.T32_BACK
0xD4D2 X boot.txy32.xy8
0xD4E2   boot.txy32.xy8dd
0xD52F   boot.txy32.xyend
0xD54D   boot.txy32.xy8bbnew
0xD507   boot.txy32.xy8cc
0xD50E X boot.txy32.xy8bb
0xD55C   boot.txy32.T32_COLOR
0xD573   boot.txy32.flag0
0xD54B   boot.txy32.xystop
0xD574 X boot.txy32.flag1
0xD575 X boot.txy32.flag2
0xD576 X boot.txy32.inp
0xD577 X boot.txy32.xxx
0xD578 X boot.txy32.yyy
0xD579 X boot.txy32.leni
0xD57B X boot.txy32.adr
0xD57E X boot.sprite2.SP_
0xD5A0   boot.sprite2.OK_SEM
0xD5AB   boot.sprite2.OK_RADE1
0xD5B4   boot.sprite2.OK_DALSI
0xD5B6   boot.sprite2.OK_RADEK
0xD5D2   boot.xdec_06.z
0x000A   boot.xdec_06.lldec
0xD5D8   boot.xdec_06.cls1
0x0004   boot.xdec_06.llbin
0xD5DE   boot.xdec_06.bndc0
0xD645   boot.xdec_06.binx2
0xD68E   boot.xdec_06.eedec
0xD5E6   boot.xdec_06.bndc2
0xD5EF   boot.xdec_06.bndc3
0xD5F7   boot.xdec_06.decbin
0xD5FD   boot.xdec_06.cls2
0xD607   boot.xdec_06.dcbn0
0xD68E   boot.xdec_06.zzbuf
0xD612   boot.xdec_06.dcbn1
0xD627   boot.xdec_06.dcbn2
0xD638   boot.xdec_06.dcbn3
0xD64B   boot.xdec_06.bnxx2
0xD651   boot.xdec_06.binneg
0xD657   boot.xdec_06.bnngx
0xD660 X boot.xdec_06.zbndec
0xD683   boot.xdec_06.eebin
0xD66E   boot.xdec_06.zbn1
0xD683   boot.xdec_06.sign
0xD674 X boot.xdec_06.zdcbin
0xD67F   boot.xdec_06.k
0x00AD X boot.xdec_06.l
0xD692 X boot.xdec_06.eebuf
0xD720   boot.cf.IDENTIFY
0xD712   boot.cf.TEXT16
0xD6C2   boot.cf.TISKSTATUS1
0xD6C4   boot.cf.TEXT11
0xD6F2   boot.cf.TEXT14
0xD6E6   boot.cf.TEXT13
0xD6D4   boot.cf.TEXT12
0xD704   boot.cf.TEXT15
0xD717 X boot.cf.TEXT_YES
0xD71C X boot.cf.TEXT_NO
0xD729   boot.cf.ACCMODE0
0xD73C   boot.cf.TST_BSY
0x00DB   boot.cf.P_HEA
0x00BF   boot.cf.P_COM
0xD756   boot.cf.TST_DR
0xD772   boot.cf.RD_512
0xD740   boot.cf.TST1
0xD751   boot.cf.TOUT1
0xD745 X boot.cf.P84
0xD767   boot.cf.ER6
0xD76B   boot.cf.ER3
0xD76F   boot.cf.ER1
0xD792   boot.cf.DMADR1
0xD789   boot.cf.RD1S
0x000E   boot.cf.RD1L
0x000B   boot.cf.DMA
0xD77D X boot.cf.RDWR1
0x00C3   boot.cf.P_DAT
0xD79B   boot.cf.PROHOD1
0x00A7 X boot.cf.P_ERR
0x00CB X boot.cf.P_HSE
0x00AF X boot.cf.P_NSE
0x00D3 X boot.cf.P_CYL
0x00B7 X boot.cf.P_CYH
0xE28E X boot.dots
0xF18D X boot.TEXT1
